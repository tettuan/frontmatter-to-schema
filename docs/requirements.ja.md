# è¦æ±‚äº‹é …

1. ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã‚’æŠ½å‡ºã—ã€è§£æã™ã‚‹
2. è§£æã—ãŸçµæœã‚’Schemaã«åŸºã¥ã„ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¸å½“ã¦è¾¼ã¿ã€æ›¸ãå‡ºã™
3. ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã®æŸ”è»Ÿæ€§ã®ãŸã‚ã«ã€TypeScriptã«ã‚ˆã‚‹æ§‹é€ åŒ–å‡¦ç†ã‚’ä½¿ã†

## ç›®çš„

Markdownãƒ•ã‚¡ã‚¤ãƒ«ã®ç´¢å¼•(Index)ã‚’ä½œã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚
æ§˜ã€…ãªå½¢å¼ã®ã€æ§˜ã€…ãªç”¨é€”ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã€å¤šæ§˜ãªãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼å®šç¾©ãŒå­˜åœ¨ã™ã‚‹ã€‚
å³æ ¼ãªSchemaå®šç¾©ã‚’ç”¨ã„ã¦é‹ç”¨ã•ã‚Œã¦ã„ãªã„ä¸­ã§ã€ç´¢å¼•ä½œã‚Šã¯é›£ã—ã„ã€‚
ãã“ã§ã€AIã‚’ç”¨ã„ã¦ã€äº‹å¾Œçš„ã«ï¼ˆå…¥åŠ›æ™‚Validationã‚„äº‹å‰å®šç¾©ã§ã¯ãªãã€ä½œæˆã•ã‚ŒãŸMarkdownã«å¯¾ã—ï¼‰ã€ç´¢å¼•ã®ãŸã‚ã®å‹å®šç¾©ã‚’è¡Œã„ã€ç´¢å¼•åŒ–ã™ã‚‹ã€‚

## èƒŒæ™¯

ãã®æ™‚ã€…ã§ã€æŸ”è»Ÿã«é‹ç”¨ã§ãã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã€Markdownã‚„ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã«ã¯å­˜åœ¨ã™ã‚‹ã€‚
ä¸€æ–¹ã€å³æ ¼ãªå‹å®šç¾©ã‚’é€šã™ã“ã¨ãªãä½œæˆã•ã‚Œã‚‹ãŸã‚ã€å…¥åŠ›æ–¹æ³•ã‚„åç§°ã‚‚é‹ç”¨è€…ä¾å­˜ã«ãªã‚ŠãŒã¡ã§ã‚ã‚‹ã€‚
ã•ã‚‰ã«ã€è“„ç©ã•ã‚ŒãŸéå»ã®Markdownã‚’å«ã‚ã‚‹ã¨ã€å…¨ã¦ã‚’äº‹å‰å®šç¾©ã—ã¦é‹ç”¨ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã€‚
ã“ã†ã—ãŸèª²é¡Œã«å¯¾å¿œã™ã‚‹ã€‚

## æŸ”è»Ÿæ€§ã®ç†ç”±

ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿ã«å¯¾å¿œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€Schemaå¤‰æ›´ã«å¯¾å¿œã§ããªã„ã€‚
ãã®ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯Schemaã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¤–éƒ¨ã‹ã‚‰èª­ã¿è¾¼ã¿ã€å·®ã—ä»£ãˆå‰æã§Schemaå®šç¾©ã‚’ç”¨ã„ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¸å‡ºåŠ›ã™ã‚‹ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ç´¢å¼•ã®ä»•æ§˜ãŒå¤‰ã‚ã£ã¦ã‚‚ **Markdownå´ã®å¤‰æ›´ã‚’ä¼´ã†ã“ã¨ç„¡ã**
ã€ç´¢å¼•å´ã ã‘å®šç¾©ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã€‚

ã¾ãŸã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé›†ã®ç´¢å¼•ã‚’ä½œã‚‹ã‚±ãƒ¼ã‚¹ã€è¨˜äº‹ã®ç´¢å¼•ã‚’ä½œã‚‹ã‚±ãƒ¼ã‚¹ãªã©ã‚‚ã€Schemaã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚»ãƒƒãƒˆã‚’å·®ã—æ›¿ãˆã€Markdownã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç½®ã‹ã‚ŒãŸPathã‚„ç´¢å¼•å‡ºåŠ›å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã§ã€åŒã˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å¤šæ§˜ãªç´¢å¼•ä½œã‚ŠãŒå¯èƒ½ã¨ãªã‚‹ã€‚

ã“ã‚ŒãŒæŸ”è»Ÿæ€§ç¢ºä¿ã®ç†ç”±ã§ã‚ã‚Šã€ã€Œå·®ã—æ›¿ãˆå¯èƒ½ãªSchemaã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã™ã‚‹ã“ã¨ãŒã€é‡è¦ãªè¦æ±‚äº‹é …ã§ã‚ã‚‹ã€ã“ã¨ã®ç†ç”±ã§ã‚ã‚‹ã€‚

# æˆæœç‰©

1. è¦æ±‚ã®æ•´ç†ã¨è¦ä»¶åŒ–
2. æ©Ÿèƒ½è¦ä»¶ã€éæ©Ÿèƒ½è¦ä»¶ã®åˆ†é›¢
3. ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œç·šã®è¨­è¨ˆè³‡æ–™ã®ä½œæˆ
4. å®Ÿè£…ã•ã‚ŒãŸè§£æã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨å …ç‰¢ãªãƒ†ã‚¹ãƒˆ
5. TypeScriptå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ2æ®µéšè§£æï¼‰
6. examples/ ã«å®Ÿä¾‹ã‚’ä½¿ã£ãŸå®Ÿè¡Œä¾‹ãŒå­˜åœ¨ã™ã‚‹

# è§£æã®æ‰‹é †

ä¸€è¦§ï¼š ã¾ãšã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸€è¦§ã‚’ä½œã‚‹ã€‚(æˆæœA)
ã¾ãŸã€æœ€çµ‚æˆæœç‰©ã‚’ç©ºã®çŠ¶æ…‹ã§ã¤ãã‚‹ï¼ˆæœ€çµ‚æˆæœç‰©Zï¼‰

å„ã‚³ãƒãƒ³ãƒ‰ï¼š æˆæœAã«å¯¾ã—ã€ãƒ«ãƒ¼ãƒ—å‡¦ç†ã™ã‚‹ã€‚å…¨ä»¶å®Ÿæ–½ã™ã‚‹ã€‚
å„ãƒ«ãƒ¼ãƒ—å†…ã§ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ1ã¤ãšã¤ã‚’å‡¦ç†ã™ã‚‹ã€‚
æœ€åˆã«ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼éƒ¨åˆ†ã‚’æŠ½å‡ºã™ã‚‹ã€‚ã“ã‚Œã¯Denoã§å®Ÿæ–½ã™ã‚‹ã€‚(æˆæœB)
æˆæœBã‹ã‚‰ã€TypeScriptã§è§£æã™ã‚‹ï¼ˆæˆæœCï¼‰
æˆæœCã‚’å…ƒã«TypeScriptã§æ§‹é€ ãƒ‡ãƒ¼ã‚¿ã¸å½“ã¦ã“ã‚€ï¼ˆæˆæœDï¼‰ æˆæœDã‚’ æœ€çµ‚æˆæœç‰©Z
ã¸çµ±åˆã™ã‚‹ æˆæœ€çµ‚æˆæœç‰©Zã‚’ä¿å­˜ã™ã‚‹ã€‚

## ä¸€è¦§ã®æ•´å½¢

availableConfigs ã‚’åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ã® c1 ã®é›†åˆä½“ã§æ§‹ç¯‰ã™ã‚‹ã€‚

åˆ©ç”¨ã™ã‚‹Schemaã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:ã€€ registry_template.json registry_schema.json

## å€‹åˆ¥ã‚³ãƒãƒ³ãƒ‰ã®æ•´å½¢

ä»¥ä¸‹ã®2ç¨®é¡ã‚’ä½¿ã„åˆ†ã‘ã‚‹ã€‚

a. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã¨ã€Œè§£æçµæœã®Schemaã€ã‚’ä½¿ã£ã¦æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹
b.æŠ½å‡ºã—ãŸæƒ…å ±ã‚’ã€ã€Œè§£æçµæœã®Schemaã€ã‚’ä½¿ã£ã¦ã€è§£æãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¸å½“ã¦è¾¼ã‚€

æŠ½å‡ºã®ãŸã‚ã®å‡¦ç†ã¯ã€TypeScriptã§è¡Œã†ã€‚

è©³ã—ãã¯ `docs/architecture/schema_matching_architecture.ja.md`
ã¸è¨˜è¼‰ã—ãŸãŸã‚ã€å¿…ãšèª­ã‚€ã“ã¨ã€‚

åˆ©ç”¨ã™ã‚‹Schemaã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:ã€€ registry_command_schema.json
registry_command_template.json

## æŠ½è±¡åŒ–ãƒ¬ãƒ™ãƒ«

ãƒ«ãƒ¼ãƒ«:

1. å®Ÿè£…ã«å…·ä½“çš„ãªå®Ÿä¾‹1-å®Ÿä¾‹2ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ··å…¥ã—ãªã„
2. å®Ÿä¾‹1-å®Ÿä¾‹2ã®Schemaä¾‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹ãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ãŒãªã„
3. å®Ÿä¾‹1-å®Ÿä¾‹2ã®éšå±¤æƒ…å ±ãŒå¤‰ã‚ã£ã¦ã‚‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã«å½±éŸ¿ãŒãªã„
4. ä¸Šè¨˜2ã¨3ãŒã€è¨­å®šã‚ã‚‹ã„ã¯å¼•æ•°ã§è§£æ±ºã§ãã¦ã„ã‚‹
5. æœ€çµ‚æˆæœç‰©Zã¯ã€TypeScriptå‡¦ç†ã«ã‚ˆã‚‹æˆæœç‰©ã‚’çµåˆã—ãŸçµæœã¨ã‚¤ã‚³ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚

# å‚ç…§ã™ã¹ãæƒ…å ±

ä»¥ä¸‹ã¯ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«è©²å½“ã™ã‚‹äº‹ä¾‹ã§ã‚ã‚‹ã€‚ æˆæœç‰©ã¯ã€ã“ã“ã«æŒ™ã’ãŸ
å®Ÿä¾‹1-å®Ÿä¾‹2
ä»¥å¤–ã®ã‚±ãƒ¼ã‚¹ã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã€æ±ç”¨çš„ã«æŠ½è±¡åŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚
ãã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€ä»¥ä¸‹ã®å®Ÿä¾‹ã‚’ä½¿ã£ã¦ã€å®Ÿéš›ã«Schemaã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¸ã¨å½“ã¦è¾¼ã‚€ã“ã¨ãŒå‡ºæ¥ã‚‹ã‹æ¤œè¨¼ã™ã‚‹ç›®çš„ã§ä¾‹ç¤ºã™ã‚‹ã€‚

ãªãŠã€å®Ÿéš›ã®ä½¿ç”¨ä¾‹ã¨ã—ã¦ã¯ã€ examples/
é…ä¸‹ã«ä½œæˆã—ã€å®Ÿè¡Œå¯èƒ½ãªå½¢ã§å†ç¾ã™ã‚‹ã“ã¨ã€‚ tests/
ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’å¼·å›ºã«ã™ã‚‹å½¹å‰²ã§ã‚ã‚Šã€ examples/
ãŒå®Ÿä¾‹ã‚’å®Ÿè¡Œã—ã¦ç¤ºã™å½¹å‰²ã§ã‚ã‚‹ã€‚

## å®Ÿä¾‹1

### ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼è§£æå¯¾è±¡ã®ãƒ•ã‚©ãƒ«ãƒ€ï¼š

`.agent/climpt/prompts`

### è§£æçµæœã®ä¿å­˜å…ˆï¼š

`.agent/climpt/registry.json`

### è§£æçµæœã®Schemaï¼š

```json:registry_schema.json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Registry Schema",
  "description": "Schema for registry configuration with tools and commands",
  "properties": {
    "version": {
      "type": "string",
      "description": "Registry version (e.g., \"1.0.0\")",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "description": {
      "type": "string",
      "description": "Overall registry description"
    },
    "tools": {
      "type": "object",
      "description": "Tool configuration and command registry",
      "properties": {
        "availableConfigs": {
          "type": "array",
          "description": "Tool names array - each becomes available as climpt-{name}",
          "items": {
            "type": "string",
            "enum": ["git", "spec", "test", "code", "docs", "meta"]
          }
        },
        "commands": {
          "type": "array",
          "description": "Command registry - defines all available C3L commands",
          "items": { "$ref": "command.schema.json" }
        }
      },
      "required": ["availableConfigs", "commands"],
      "additionalProperties": false
    }
  },
  "required": ["version", "description", "tools"],
  "additionalProperties": false
}
```

```json:registry_command_schema.json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Command Schema",
  "description": "Schema for a single command definition",
  "properties": {
    "c1": {
      "type": "string",
      "description": "Domain/category (git, spec, test, code, docs, meta)",
      "enum": ["git", "spec", "test", "code", "docs", "meta"]
    },
    "c2": {
      "type": "string",
      "description": "Action/directive (create, analyze, execute, etc.)"
    },
    "c3": {
      "type": "string",
      "description": "Target/layer (refinement-issue, quality-metrics, etc.)"
    },
    "description": {
      "type": "string",
      "description": "Command description"
    },
    "usage": {
      "type": "string",
      "description": "Usage instructions and examples"
    },
    "options": {
      "type": "object",
      "description": "Available options for this command",
      "properties": {
        "input": {
          "type": "array",
          "description": "Supported input formats",
          "items": { "type": "string" }
        },
        "adaptation": {
          "type": "array",
          "description": "Processing modes",
          "items": { "type": "string" }
        },
        "input_file": {
          "type": "array",
          "description": "File input support",
          "items": { "type": "boolean" }
        },
        "stdin": {
          "type": "array",
          "description": "Standard input support",
          "items": { "type": "boolean" }
        },
        "destination": {
          "type": "array",
          "description": "Output destination support",
          "items": { "type": "boolean" }
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["c1", "c2", "c3", "description", "usage", "options"],
  "additionalProperties": false
}
```

### è§£æçµæœã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼š

```json:registry_template.json
{
  "version": "{version}",
  "description": "{description}",
  "tools": {
    "availableConfigs": "{tools.availableConfigs}",
    "commands": [
      { "$ref": "registry_command_template.json" }
    ]
  }
}
```

```json:registry_command_template.json
{
  "c1": "{c1}",
  "c2": "{c2}",
  "c3": "{c3}",
  "description": "{description}",
  "usage": "{usage}",
  "options": {
    "input": "{options.input}",
    "adaptation": "{options.adaptation}",
    "input_file": "{options.input_file}",
    "stdin": "{options.stdin}",
    "destination": "{options.destination}"
  }
}
```

## å®Ÿä¾‹2

### ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼è§£æå¯¾è±¡ã®ãƒ•ã‚©ãƒ«ãƒ€ï¼š

`.agent/drafts/articles`

### è§£æçµæœã®ä¿å­˜å…ˆï¼š

`.agent/drafts/books.yml`

### è§£æçµæœã®Schemaï¼š

```
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "books": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "emoji": { "type": "string" },
          "type": { "type": "string" },
          "topics": {
            "type": "array",
            "items": { "type": "string" }
          },
          "published": { "type": "boolean" },
          "published_at": { "type": "string", "format": "date-time" }
        },
        "required": ["title", "type", "published"],
        "additionalProperties": true
      }
    }
  },
  "required": ["books"],
  "additionalProperties": false
}
```

### è§£æçµæœã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼š

```
books:
  - title: "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«"
    emoji: "ğŸ“š"
    type: "tech"
    topics:
      - "claudecode"
      - "codingagents"
    published: true
    published_at: "2025-08-01 10:00"
  # ...ä»–ã®è¨˜äº‹ã‚‚åŒæ§˜ã«è¿½åŠ 
```
