# 要件分析書

## 1. 機能要件

### 1.1 プロンプト一覧の取得

- `.agent/climpt/prompts`フォルダ内のマークダウンファイルを検索
- ファイルパスのリストを作成

### 1.2 フロントマター抽出

- 各マークダウンファイルからフロントマター部分を抽出
- YAMLフォーマットのメタデータを取得

### 1.3 情報解析（Claude API利用）

- フロントマターと解析結果Schemaを入力として情報を抽出
- C3L（C1/C2/C3）コマンド体系の情報を識別

### 1.4 テンプレート当て込み（Claude API利用）

- 抽出した情報を解析結果Schemaに基づいて構造化
- registry.jsonフォーマットへの変換

### 1.5 解析結果の統合と保存

- 全プロンプトの解析結果を統合
- `.agent/climpt/registry.json`への保存

## 2. 非機能要件

### 2.1 拡張性

- 新しいプロンプトフォーマットへの対応が容易
- Schema変更への柔軟な対応

### 2.2 保守性

- ドメイン駆動設計による明確な責任分離
- テスト駆動開発による品質保証

### 2.3 性能

- 大量のプロンプトファイルの効率的な処理
- Claude API呼び出しの最適化

### 2.4 エラーハンドリング

- API呼び出し失敗時のリトライ機構
- 部分的な失敗時の継続処理

## 3. 制約事項

### 3.1 技術スタック

- Deno環境での実装
- Claude APIの利用（`claude -p`コマンド経由）

### 3.2 入出力フォーマット

- 入力：マークダウンファイルのフロントマター（YAML）
- 出力：registry.json（定義済みSchema）
