---
title: "AIå‡ºåŠ›ã‚³ãƒ¼ãƒ‰ã‚’åæŸã•ã›ã‚‹æ–¹æ³•ï¼š ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ & å…¨åŸŸæ€§ & ãƒ†ã‚¹ãƒˆé§†å‹• & Claude Code Company"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [claudecode,ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ,å…¨åŸŸé–¢æ•°]
published: true
published_at: 2025-07-07 11:30
---

# ã‚ã‚‰ã™ã˜

AIé–‹ç™ºã«ãŠã‘ã‚‹ã€Œã‚³ãƒ¼ãƒ‰å“è³ªã®å®‰å®šåŒ–ã€ã«ã¤ã„ã¦è€ƒãˆã‚‹éš›ã«ã€ç§ãŒè¾¿ã‚Šç€ã„ãŸè§£æ±ºæ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ä¸»ã« Agentic Coding å‘ã‘ã§ã™ã€‚

**Claude Code Company**ã¨ã„ã†ä¸¦åˆ—é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã‹ã‚‰ã€é–‹ç™ºåŠ¹ç‡ã¯åŠ‡çš„ã«å‘ä¸Šã—ã¾ã—ãŸã€‚ã—ã‹ã—åŒæ™‚ã«ã€AIãŒç”Ÿæˆã™ã‚‹ä¹±é›‘ãªã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ãŒæ··ä¹±ã«é™¥ã‚‹å•é¡Œã‚‚æµ®ä¸Šã—ã¾ã—ãŸã€‚

ã“ã®å•é¡Œã®æ ¸å¿ƒã¯ã€ã€ŒAIã¯å„ªç§€ã ãŒã€è¨­è¨ˆæ€æƒ³ãŒä¸€è²«ã—ãªã„ã€ã¨ã„ã†ç‚¹ã«ã‚ã‚‹ã¨ä»®å®šã—ã¾ã—ãŸã€‚

è¦ã¯ã€AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã¯ã€Œè¨­è¨ˆã®è»¸ã€ãŒå¿…è¦ã ã¨ã„ã†ã“ã¨ã§ã™ã€‚ãã—ã¦ã€ãã®è»¸ã¨ã—ã¦**ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ**ã¨**å…¨åŸŸæ€§**ã€**ãƒ†ã‚¹ãƒˆé§†å‹•**ã®çµ„ã¿åˆã‚ã›ãŒéå¸¸ã«æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€å®Ÿéš›ã«ç§ãŒé‹ç”¨ã—ã¦ã„ã‚‹æ‰‹æ³•ã‚’æ•´ç†ã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã®å…·ä½“ä¾‹ã‚’è¼‰ã›ã¾ã—ãŸã€‚

# ã¯ã˜ã‚ã«

ç¾ä»£ã®AIé–‹ç™ºç’°å¢ƒã¯ã€é©šãã»ã©é«˜é€Ÿã«ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚ç§è‡ªèº«ã€[Claude Code Company](20250615-5dc8b1eac82b55)ã‚’æ§‹ç¯‰ã—ã¦ã‹ã‚‰ã€Claude MAX($200)ã®ä¸Šé™ã«ã™ãé”ã—ã¦ã—ã¾ã†ã»ã©é–‹ç™ºåŠ¹ç‡ãŒé«˜ã¾ã‚Šã¾ã—ãŸã€‚å¤§ããªè¦ä»¶ã®å ´åˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ã‹ã‚‰Limitã«é”ã™ã‚‹ã¾ã§ã€åœæ­¢ã™ã‚‹ã“ã¨ãªãç¨¼åƒã—ç¶šã‘ã¾ã™ã€‚

ã—ã‹ã—ã€ã“ã®é«˜é€Ÿé–‹ç™ºã«ã¯é‡å¤§ãªå‰¯ä½œç”¨ãŒã‚ã‚Šã¾ã™ã€‚AIãŒç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã€å€‹åˆ¥ã«è¦‹ã‚‹ã¨å„ªç§€ã§ã‚‚ã€å…¨ä½“ã¨ã—ã¦è¦‹ã‚‹ã¨ä¸€è²«æ€§ã‚’æ¬ ãå ´åˆãŒå¤šã„ã®ã§ã™ã€‚

ãã“ã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆã®ç¢ºç«‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’å–ã‚Šå…¥ã‚Œã¾ã—ãŸã€‚

## ç§ã®ç¾åœ¨ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼

ç¾åœ¨ç§ãŒå®Ÿè·µã—ã¦ã„ã‚‹é–‹ç™ºãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- **äºˆç´„å®Ÿè¡Œ**ï¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ã§Limitè§£é™¤æ™‚é–“ã‚’æŒ‡å®šã—ã€ä¸åœ¨æ™‚ã§ã‚‚èµ·å‹•
- **è¦ä»¶äº‹å‰ä½œæˆ**ï¼šãã®æ™‚ã®èª²é¡Œã«å¿œã˜ã¦ã€æ¬¡ã«å®Ÿè¡Œã™ã‚‹è¦ä»¶ã‚’æº–å‚™ã—ã¦ãŠã
- **CLIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: CLiã®ä¸­ã§å‹•çš„ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å‘¼ã³å‡ºã™
- **è¨­è¨ˆè»¸ã®ç¢ºç«‹**ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨å…¨åŸŸæ€§ã‚’ç”¨ã„ã¦ã€ä¸€è²«ã—ãŸæ¦‚å¿µã‚’ä½œã‚‹

è¨­è¨ˆã¯ã€ç‰¹ã«ã€Œ[AI æ™‚ä»£ã®ã‚³ãƒ¼ãƒ‰å“è³ªæˆ¦ç•¥ - ãƒã‚°ã«å¼·ã„ã‚³ãƒ¼ãƒ‰ã‚’å‹ã§ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹](https://zenn.dev/dinii/articles/totality-is-all-you-need)ã€ã¨ã€Œ[å…¨åŸŸé–¢æ•°ã‚’ä½¿ã„ã“ãªã›ã°ç•°å¸¸ç³»ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒæ¸›ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ä»®èª¬](https://zenn.dev/loglass/articles/76674f0eddfa8a)ã€ã‹ã‚‰ãƒ’ãƒ³ãƒˆã‚’å¾—ã¦ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã«å…¨åŸŸæ€§ã‚’åŠ å‘³ã—ãŸã‚‚ã®ã§ã™ã€‚

ä»Šå›ã¯ã€ã“ã®è¨­è¨ˆè»¸ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

# AIé–‹ç™ºã«ãŠã‘ã‚‹èª²é¡Œã®æ ¹æº

## ã‚³ãƒ¼ãƒ‰å“è³ªã®åˆ†æ•£å•é¡Œ

AIã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ãŠã‘ã‚‹æœ€å¤§ã®èª²é¡Œã¯ã€**å“è³ªã®åˆ†æ•£**ã§ã™ã€‚

å¾“æ¥ã®é–‹ç™ºã§ã¯ã€ä¸€äººã®é–‹ç™ºè€…ãŒä¸€è²«ã—ãŸæ€æƒ³ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå ´åˆã€å¤šå°‘ã®å“è³ªã®ã°ã‚‰ã¤ãã¯ã‚ã£ã¦ã‚‚ã€åŸºæœ¬çš„ãªè¨­è¨ˆæ€æƒ³ã¯ä¿ãŸã‚Œã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€AIãŒé–¢ä¸ã™ã‚‹é–‹ç™ºã§ã¯ã€ä¸€äººã®é–‹ç™ºè€…ãŒæ‰‹ãŒã‘ã¦ã„ã¦ã‚‚ã€AIã®æ‹…å½“é ˜åŸŸã§ä¸€è²«æ€§ãŒå¤±ã‚ã‚ŒãŒã¡ã§ã™ã€‚

å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ï¼š

- **æŠ½è±¡åº¦ã®é«˜ã„è¨­è¨ˆ**ãŒã€è§£é‡ˆã®é•ã„ã«ã‚ˆã£ã¦ãƒ–ãƒ¬ã‚‹
- **èª¤ã£ãŸå‹å®šç¾©**ã‚„**å†—é•·ãªé‡è¤‡ã‚³ãƒ¼ãƒ‰**ãŒé‡ç”£ã•ã‚Œã‚‹
- **ã‚³ãƒ¼ãƒ‰å†…éƒ¨ã®ã€Œèª¤ã‚Šæ¯”é‡ã€** ãŒå¤§ãããªã‚Šã€æ´—ç·´ã•ã‚ŒãŸã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰ãŒåŸ‹ã‚‚ã‚Œã‚‹

## ãƒ†ã‚¹ãƒˆã®è¿‚å›è·¯å•é¡Œ

ã•ã‚‰ã«æ·±åˆ»ãªã®ãŒã€**ãƒ†ã‚¹ãƒˆã®è¿‚å›è·¯å•é¡Œ**ã§ã™ã€‚

AIãŒè‡ªå‹•ç”Ÿæˆã—ãŸãƒ†ã‚¹ãƒˆã¯ã€æŠ½è±¡åº¦ãŒé«˜ã„ã¨ã€Œä½•ã‚’ã©ã†ãƒ†ã‚¹ãƒˆã™ã¹ãã‹ã€ãŒæ˜ç¢ºã§ãªããªã‚Šã¾ã™ã€‚ãã®çµæœï¼š

- **å…¨ä»¶ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹**ã¨ã€ãƒ†ã‚¹ãƒˆé‡ãŒè†¨å¤§ã«ãªã‚‹
- **èª¤ã£ãŸã‚³ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆ**ãŒé‡ç”£ã•ã‚Œã‚‹ã¨ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãŒå›°é›£ã«ãªã‚‹
- **ä¸»é¡Œã¨æœ«ç¯€ã®ãƒ†ã‚¹ãƒˆ**ã«æ¿ƒæ·¡ãŒã¤ã‹ãšã€é‡è¦ãªéƒ¨åˆ†ã‚’è¦‹å¤±ã†

ã“ã†ã—ãŸãƒ†ã‚¹ãƒˆã‚’passã•ã›ã‚‹ã¹ãå¼·åˆ¶ã™ã‚‹ã¨ã€è¿‚å›çµŒè·¯ã‚’æ¢ã—å§‹ã‚ã¾ã™ã€‚
å˜å“ã‚’ä½œã£ã¦çµ‚ã‚ã‚Šãªã‚‰å•é¡Œã«ãªã‚‰ãšã¨ã‚‚ã€ç¶™ç¶šçš„ãªé–‹ç™ºã§ã¯ã€å¿…ãšè² æ‹…ã«ãªã‚Šã¾ã™ã€‚


### ä½™è«‡ï¼šèª¤ã‚Šæ¯”é‡

ã€Œèª¤ã‚Šæ¯”é‡ã€ã¨æ›¸ãã¾ã—ãŸãŒã€ã€Œèª¤ã‚Šã€ã¨å‘¼ã¶ã¹ãã‹ã€ä¸€åº¦è€ƒãˆã¾ã—ãŸã€‚
æ°¸é ã«AIã¸ä»»ã›ç¶šã‘ã‚‹ã¨ã€ã©ã“ã‹ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ã‚¹ãƒ«ãƒ¼ã—ã€äººé–“ãŒæ€ã„ã‚‚ã—ãªã„å½¢ã«æ˜‡è¯ã™ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚
ãŸã ã€é–‹ç™ºã®ç›®çš„ã¯ã€ç ”ç©¶é–‹ç™ºçš„ã«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒ–ãƒ¬ãƒ¼ã‚¯ã‚¹ãƒ«ãƒ¼ã‚’è¡Œã„ãŸã„ã‚ã‘ã§ã¯ãªãã€æ±ºã¾ã£ãŸè¦ä»¶ã«åŸºã¥ã„ã¦å®‰å®šã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿã¿å‡ºã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§ã™ã€‚ä¸è¦ãªã‚³ãƒ¼ãƒ‰ã¯èª¤ã‚Šã ã¨ã—ã€æ··åœ¨ã—ã¦æ¯”é‡ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’ã€Œèª¤ã‚Šæ¯”é‡ã€ã¨è¡¨ç¾ã—ã¾ã—ãŸã€‚

èª¤ã‚Šæ¯”é‡ã¨ã¯ã€é€ èªã§ã™ã€‚åŒä¸€ç›®çš„ã‚’é”æˆã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã€èª¤ã£ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹åº¦åˆã„ã‚’æŒ‡ã—ã¦ã€æ¯”é‡ã¨ã—ã¾ã—ãŸã€‚ç›®çš„é”æˆã«å¿…è¦ãªã‚³ãƒ¼ãƒ‰é‡ãŒç´”æ°´ã€æ··åˆç‰©ãŒå¢—ãˆã¦æ¯”é‡ãŒå¤‰ã‚ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚



# è§£æ±ºç­–ï¼š4ã¤ã®è»¸ã«ã‚ˆã‚‹åæŸæ‰‹æ³•

ç§ãŒå®Ÿè·µã—ã¦ã„ã‚‹è§£æ±ºç­–ã¯ã€**4ã¤ã®è»¸**ã‚’çµ„ã¿åˆã‚ã›ãŸåæŸæ‰‹æ³•ã§ã™ã€‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã‚’é‡ã­ã¦ä¸€å®šæ°´æº–ã¸åæ–‚ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç²’åº¦åˆ†é›¢ãŒé€²ã‚€ã‹ã®ã‚ˆã†ã«ã€å¾ã€…ã«ã¶ã‚Œãªããªã‚Šã€å›ºã¾ã£ã¦ã„ãã¾ã™ã€‚ï¼ˆè’¸ç•™ãŒé€²ã¿ã¾ã™ï¼‰

## 1. ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã®è¿½æ±‚

### ãªãœãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆãªã®ã‹

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¯ã€**é ˜åŸŸ**ã¨**ä¸€è²«æ€§**ã‚’æ‰±ã£ã¦ã„ã¾ã™ã€‚ã“ã®ç‚¹ãŒAIé–‹ç™ºã¨ç›¸æ€§ãŒè‰¯ã„ã®ã§ã™ã€‚

AIç”Ÿæˆã«ã‚ˆã£ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå´©ã‚Œã‚‹ã®ã¯ã€å®Ÿã¯**ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ãŒè¶³ã‚Šãªã„**ã‹ã‚‰ã§ã™ã€‚é‡è¦ã‹ã¤è«–ç†æ€§ã®é«˜ã„æ¦‚å¿µã¯ã€æœ¬æ¥ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ãŠã„ã¦é‡è¦ãªã¯ãšã§ã™ã€‚ãã®é‡è¦ãªæ¦‚å¿µã®å®Ÿè£…ãŒå´©ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ã¤ã¾ã‚Šãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ãŒä¸ååˆ†ã ã¨ã„ã†ã“ã¨ã§ã™ã€‚

### å®Ÿè·µçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã§é‡è¦ãªã®ã¯ã€ä»¥ä¸‹ã®2ç‚¹ã§ã™ï¼š

- **ä¸€è²«ã—ãŸé‡è¦ãªæ¦‚å¿µ**ã‚’ã€ã©ã“ã§ã‚‚å…±é€šã§ç”¨ã„ã‚‹ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªã§å®šç¾©ã™ã‚‹
- **ãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èª**ãŒé€šç”¨ã™ã‚‹ç¯„å›²ã‚’å®šç¾©ã™ã‚‹ï¼ˆå¢ƒç•Œã¥ã‘ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰

ã“ã®2ç‚¹ã ã‘ã§ã‚‚ã€æ··ä¹±ãŒæ¿€æ¸›ã—ã¾ã™ã€‚

ä½œæ¥­çš„ã«ã¯ã€**æœ€åˆã®ä¸­æ ¸éƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨**ãŒéå¸¸ã«åŠ´åŠ›ã®ã‹ã‹ã‚‹éƒ¨åˆ†ã§ã™ã€‚ã€Œè¦‹ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã„ã¦ã€è¦‹ãˆã¦ã„ãªã„çŠ¶æ…‹ã€ãŒç¶šããŸã‚ã§ã™ã€‚ã€Œã“ã‚Œã ã€ã¨è¦‹ãˆã‚‹ã¾ã§è¿½æ±‚ã—ãã‚‹ã“ã¨ã§ã€ãƒ–ãƒ¬ãªã„è¨­è¨ˆã®è»¸ãŒç¢ºç«‹ã•ã‚Œã¾ã™ã€‚

### å®šç¾©ã®è©•ä¾¡

ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã•ã‚ŒãŸæ–‡ç« ã‚’èª­ã‚“ã æ™‚ã€ã€Œã—ã£ãã‚Šãã‚‹ã€ã¨æ„Ÿã˜ã‚‹ã‹ã©ã†ã‹ã§ã™ã€‚
ãƒ‰ãƒ¡ã‚¤ãƒ³ã«è©³ã—ããªã„ã¨ã€ã‚ã¾ã‚Šãƒ”ãƒ³ã¨æ¥ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³ã«è©³ã—ããªã‚‹ã¨ã€ã€Œãã†ã€ã“ã†ã‚„ã£ã¦è¡¨ç¾ã™ã‚Œã°ã‚ˆã‹ã£ãŸã‚“ã ã€ã¨ã€ã—ã£ãã‚Šãã¾ã™ã€‚
ã€Œã“ã‚Œã¯å®šç¾©ã§ããŸã€ã¨æ„Ÿã˜ãŸã¨ãã€å¾®å¦™ãªè¨€ã„å›ã—ã®ã²ã¨ã¤ã²ã¨ã¤ãŒã€ç„¡é§„ãªãã€çš„ç¢ºã«ã€è¨€ã„è¡¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚


## 2. å…¨åŸŸæ€§ã®è¿½æ±‚

### å…¨åŸŸé–¢æ•°ã®çœŸã®ä¾¡å€¤

å…¨åŸŸé–¢æ•°ã¯ã€å˜ä½“ã§ã¯é€šç”¨ã—ã¾ã›ã‚“ã€‚è«–ç†æ€§ã‚ˆã‚Šã‚‚ç¾…åˆ—ã‚„åˆ—æŒ™ãŒå„ªå…ˆã•ã‚Œã‚„ã™ã„ã‹ã‚‰ã§ã™ã€‚

ã¨ã“ã‚ãŒã€**ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã«ã‚ˆã£ã¦ã€å…¨åŸŸæ€§ãŒæˆã‚Šç«‹ã¤**ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è«–ç†ãŒä¸€è²«ã™ã‚‹ã¨ã€å…¨ä½“ã‚’è¡¨ç¾ã—ãŸå‹ãŒå®šç¾©ã§ãã‚‹ã‹ã‚‰ã§ã™ã€‚æŠ½è±¡åº¦ã®é«˜ã„æ¦‚å¿µã§å‹å®šç¾©ãŒå…¨åŸŸåŒ–ã™ã‚‹ã¨ã€è«–ç†çš„ãªæŠœã‘æ¼ã‚ŒãŒãªããªã‚Šã¾ã™ã€‚

### AIã¨ã®ç›¸æ€§

éƒ¨åˆ†é–¢æ•°ã®æ§‹æˆã§ã¯ã€ã•ã¾ã–ã¾ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è€ƒæ…®ã™ã‚‹AIã«ãŠã„ã¦ã€ä¸å…·åˆã«é­é‡ã™ã‚‹ç¢ºç‡ãŒä¸ŠãŒã‚Šã¾ã™ã€‚
å®Ÿéš›ã¯ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã ã¨ã—ã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆã¯å¹³ç­‰ãªå›æ•°ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã®è§£é‡ˆæ™‚ã«ã¯ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œå›æ•°ã®æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ç§ã¯ã€ã“ã®å®Ÿè¡Œå›æ•°æƒ…å ±ã®æ¬ è½ãŒã€éƒ¨åˆ†é–¢æ•°ã¨AIãŒçµ„ã¿åˆã‚ã•ã£ãŸæ™‚ã®å¤§ããªèª²é¡Œã§ã‚ã‚ã†ã¨ä»®å®šã—ã¦ã„ã¾ã™ã€‚

è§£æ±ºã«ã¯ã€æŠœã‘æ¼ã‚Œã®ãªã„ã€Œå…¨åŸŸã€ã‚’è¡¨ã™å¿…è¦æ€§ãŒç”Ÿã˜ã¾ã™ã€‚å…·ä½“ã§åˆ—æŒ™ã™ã‚‹ã¨éš›é™ãŒãªã„ãŸã‚ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚„è«–ç†æ€§ã§å¢ƒç•Œã‚’ä½œã‚Šå…¨åŸŸã‚’ã‚«ãƒãƒ¼ã—ã¾ã™ã€‚

ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ãŒãªã•ã‚Œã‚‹ã¨ã€å¢ƒç•Œç·šãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šå…¨åŸŸæ€§ã‚’è¡¨ç¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## 3. ãƒ†ã‚¹ãƒˆé§†å‹•ã«ã‚ˆã‚‹ä»•æ§˜ã®å›ºå®š

### è¨­è¨ˆæŒ‡å‘ã®ãƒ†ã‚¹ãƒˆé§†å‹•

å³å¯†ã«ã€Œã¾ãšãƒ†ã‚¹ãƒˆã‹ã‚‰ã€ä½œã‚‹ãƒ†ã‚¹ãƒˆé§†å‹•ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ†ã‚¹ãƒˆã‚’ã€Œã“ã†æ¤œè¨¼ã™ã¹ãã€ã¨ã„ã†æ–¹å‘ã‹ã‚‰æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

å®Ÿè£…ã¨ãƒ†ã‚¹ãƒˆã‚’ä½œã‚Šã¤ã¤ã€ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆã‹ã‚‰ä»•æ§˜åŒ–ã—ã€ä»•æ§˜ã«åŸºã¥ã„ã¦ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¶²ç¾…ã—ã€ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚

### å˜ä½“ãƒ†ã‚¹ãƒˆã®æˆ¦ç•¥çš„æ´»ç”¨

ç‰¹ã«é‡è¦ãªã®ã¯ã€**è¨­è¨ˆã€æ§‹é€ ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å˜ä½“ã§ãƒ†ã‚¹ãƒˆã—ã¦ãŠã**ã“ã¨ã§ã™ã€‚è¤‡åˆåŒ–ã™ã‚‹å‰ã«ã€ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆã—ãŸçŠ¶æ…‹ã‚’ãƒ†ã‚¹ãƒˆã§å›ºã‚ã¦ãŠãæ„å‘³ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€AIç”Ÿæˆã‚³ãƒ¼ãƒ‰ãŒè¨­è¨ˆæ€æƒ³ã‹ã‚‰é€¸è„±ã—ã¦ã„ãªã„ã‹ã‚’ã€ç¶™ç¶šçš„ã«æ¤œè¨¼ã§ãã¾ã™ã€‚

## 4. ç‰©é‡ã§ã‚«ãƒãƒ¼ã™ã‚‹ä¸¦åˆ—æˆ¦ç•¥ (Claude Code Company)

### Claude Code Companyã«ã‚ˆã‚‹é«˜é€Ÿã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**Claude Code Company**ã§ä¸¦åˆ—ç¨¼åƒã—ã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã‚„å®Ÿè£…ã‚’çŸ­æ™‚é–“ã§çµ‚ã‚ã‚‰ã›ã‚‹ã“ã¨ã§ã€è©¦è¡ŒéŒ¯èª¤ã®ã‚³ã‚¹ãƒˆã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚

ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ãŒé–“é•ãˆã¦ã„ãŸã‚‰ã€ã•ã‚‰ã«æ·±æ˜ã‚Šã‚’ã—ã¦å®šç¾©ã—ç›´ã—ã€ã‚„ã‚Šç›´ã™ã€‚ã“ã®é«˜é€Ÿãªã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½ã«ãªã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šç²¾åº¦ã®é«˜ã„ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­è¨ˆã«åˆ°é”ã§ãã¾ã™ã€‚

### ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è’¸ç•™ï¼ˆåæ–‚ï¼‰

å†å®šç¾©ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ãŒã‚¯ãƒªã‚¢ã«ãªã‚‹ã»ã©ã€ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒãƒ–ãƒ¬ãªã„æ¦‚å¿µç”¨èªã¨ãªã£ã¦ã„ãã¾ã™ã€‚ã“ã‚ŒãŒãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªã¨ã—ã¦æ˜ç¢ºã•ã‚’æŒã¤ã‚ˆã†ã«ãªã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã§ã®å½±éŸ¿åŠ›ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ã§ã‚ã‚Šã€èŠ¯ã‚’é€šã™ä¸€è²«æ€§ã§ã‚ã‚‹ï¼‰ã‚’æŒã¤ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ç§ã¯ã€ç‰©ç†çš„ã«ã¯è’¸ç•™ã‚ˆã‚Šåˆ†ç´šã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ãŠã‚Šã€åˆ†é›¢ã•ã‚ŒãŸé‡è¦ãªæ¦‚å¿µãŒã„ãã¤ã‹ã®æ¦‚å¿µã«åæ–‚ã—ã¦ã„ãã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
ã“ã®åˆ†ç´šã®ãŸã‚ã«ã®ã€Œãµã‚‹ã„ã€ã«æ›ã‘ã‚‹è¡Œç‚ºã«ã€ä¸¦åˆ—ç¨¼åƒã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚

# æ‰‹æ³•ã®ç›¸ä¹—åŠ¹æœ

ã“ã‚Œã‚‰4ã¤ã®è»¸ã¯ã€å€‹åˆ¥ã«æ©Ÿèƒ½ã™ã‚‹ã ã‘ã§ãªãã€ç›¸ä¹—åŠ¹æœã‚’ç”Ÿã¿å‡ºã—ã¾ã™ã€‚

**ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ**ãŒæ¦‚å¿µã®è»¸ã‚’æä¾›ã—ã€**å…¨åŸŸæ€§**ãŒå®Ÿè£…ã®å®Œå…¨æ€§ã‚’ä¿è¨¼ã—ã€**ãƒ†ã‚¹ãƒˆé§†å‹•**ãŒä»•æ§˜ã®å›ºå®šã‚’è¡Œã„ã€**ç‰©é‡ä½œæˆ¦**ãŒé«˜é€Ÿãªæ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

ã“ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€AIãŒç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã€Œåæ–‚ã€ã—ã¦ã„ãã¾ã™ã€‚ã¤ã¾ã‚Šã€å“è³ªãŒä¸€å®šã®æ°´æº–ã«å‘ã‹ã£ã¦å®‰å®šåŒ–ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã¨ã—ã¦ã®ä¸€è²«æ€§ãŒä¿ãŸã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä¸€æ–¹ã§ã€ã“ã®æ‰‹æ³•ã«ã‚‚é™ç•ŒãŒã‚ã‚Šã¾ã™ã€‚åˆæœŸã®ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã“ã¨ã€ä¸¦åˆ—ç¨¼åƒã«ã‚ˆã‚‹é«˜é€Ÿé–‹ç™ºãŒå¿…é ˆã§ã‚ã‚‹ã“ã¨ãªã©ã§ã™ã€‚ã—ã‹ã—ã€AIé–‹ç™ºã®è¦æ¨¡ãŒå¤§ãããªã‚‹ã»ã©ã€ã“ã®åˆæœŸæŠ•è³‡ã®ä¾¡å€¤ã¯é«˜ã¾ã‚‹ã§ã—ã‚‡ã†ã€‚

æ¬¡ã«ã€å…·ä½“çš„ãªãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã®ä¾‹ã‚’é€šã˜ã¦ã€ã“ã®æ‰‹æ³•ãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

# å®Ÿä¾‹-1

ä»¥ä¸‹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã¯ã€GitHub Copilot ã®Claude Sonnet 4 ã§å‡ºåŠ›ã—ã¾ã—ãŸã€‚Claude Code Companyã§ææ–™ã‚’å‡ºã—å°½ãã—ã€ä»•ä¸Šã’éƒ¨åˆ†ã‚’GitHub Copilotã§è¡Œã„ã¾ã—ãŸã€‚
ï¼ˆClaude MAXãŒLimitåˆ¶é™ã«æ›ã‹ã£ã¦ã„ã‚‹é–“ã®ä½œæ¥­ãƒ»ãƒ»ã§ã™ï¼‰

ã¡ãªã¿ã«ã€å‡ºåŠ›ã¯AIãŒå‡ºåŠ›ã—ãŸã€Œãã®ã¾ã¾ã€ã§ã™ã€‚
ãƒãƒã£ã¨å‡ºã¦ã„ã¾ã™ã€‚ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚‚æ„å›³é€šã‚Šã€ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ•ãƒ­ãƒ¼ã‚‚æ„å›³é€šã‚Šã§ã™ã€‚
ï¼ˆãã®ä»£ã‚ã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³é ˜åŸŸãŒç‹­ã‚ã«å‡ºã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã€‚ï¼‰

----

ã“ã“ã‹ã‚‰å®Ÿä¾‹-1

----

## ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œç·šã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œã®å…¨ä½“åƒ

Breakdown CLIã¯ã€3ã¤ã®ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨è¤‡æ•°ã®æ”¯æ´ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹è¤‡é›‘ãªã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€**ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œç·š**ã¨**ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›ãƒ•ãƒ­ãƒ¼**ã‚’ä½“ç³»çš„ã«æ•´ç†ã—ã€ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã«ã‚ˆã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã‚’æ˜ç¢ºã«è¡¨ç¾ã—ã¾ã™ã€‚

### ç¬¬1ç« ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œã®å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æ§‹æˆ

```typescript
// ãƒ‰ãƒ¡ã‚¤ãƒ³ã®éšå±¤æ§‹é€ 
type BreakdownDomain = 
  | "cli-parsing"           // CLIå¼•æ•°è§£æãƒ‰ãƒ¡ã‚¤ãƒ³
  | "config-management"     // è¨­å®šç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³
  | "prompt-path-resolution" // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¹æ±ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³
  | "prompt-variable-generation" // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³
  | "prompt-generation"     // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆæœ€çµ‚å‡ºåŠ›ï¼‰
  | "stdout-output";        // æ¨™æº–å‡ºåŠ›ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆæ¨™æº–å‡ºåŠ›ã¾ã§ï¼‰

// æ³¨æ„ï¼šä»¥ä¸‹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯¾è±¡å¤–
// | "prompt-execution"      // AIã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè¡Œï¼ˆå¯¾è±¡å¤–ï¼‰
// | "ai-response-processing" // AIå¿œç­”ã®å‡¦ç†ï¼ˆå¯¾è±¡å¤–ï¼‰
// 
// Breakdown CLIã®ã‚¹ã‚³ãƒ¼ãƒ—ï¼š
// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ã€æ¨™æº–å‡ºåŠ›ã™ã‚‹ã¾ã§ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è²¬å‹™ç¯„å›²
```

#### ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œã®å®šç¾©

```mermaid
graph TB
    subgraph "CLI Layer"
        CLI[CLIå¼•æ•°è§£æãƒ‰ãƒ¡ã‚¤ãƒ³]
    end
    
    subgraph "Configuration Layer"
        CONFIG[è¨­å®šç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³]
    end
    
    subgraph "Core Processing Layer"
        PATH[ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¹æ±ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³]
        VARS[ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³]
        PROMPT[ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³]
    end
    
    subgraph "Output Layer"
        OUTPUT[æ¨™æº–å‡ºåŠ›ãƒ‰ãƒ¡ã‚¤ãƒ³]
    end
    
    subgraph "Out of Scope (å¯¾è±¡å¤–)" 
        EXEC[AIå®Ÿè¡Œãƒ‰ãƒ¡ã‚¤ãƒ³]
        RESPONSE[AIå¿œç­”å‡¦ç†ãƒ‰ãƒ¡ã‚¤ãƒ³]
    end
    
    CLI --> CONFIG
    CLI --> PATH
    CONFIG --> PATH
    PATH --> VARS
    VARS --> PROMPT
    PROMPT --> OUTPUT
    
    %% å¯¾è±¡å¤–ã®ä¾å­˜é–¢ä¿‚ï¼ˆç‚¹ç·šã§è¡¨ç¤ºï¼‰
    OUTPUT -.-> EXEC
    EXEC -.-> RESPONSE
    
    %% ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
    style EXEC fill:#f9f9f9,stroke:#999,stroke-dasharray: 5 5
    style RESPONSE fill:#f9f9f9,stroke:#999,stroke-dasharray: 5 5
```

### ç¬¬2ç« ï¼šãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆ

#### ã‚³ã‚¢ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

```typescript
// =============================================================================
// Domain Value Objects - ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
// =============================================================================

/**
 * DirectiveType - å‡¦ç†æ–¹å‘ã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type DirectiveType = {
  readonly value: string;
  readonly profile: ConfigProfileName;
  readonly validatedByPattern: boolean;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  isValidForProfile(profile: ConfigProfileName): boolean;
  
  // ãƒ‘ã‚¹è§£æ±ºå°‚ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getPromptDirectory(baseDir: string, layer: LayerType): string;
  getSchemaDirectory(baseDir: string, layer: LayerType): string;
  isValidForResourcePath(): boolean;
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: DirectiveType): boolean;
  toString(): string;
}

/**
 * LayerType - éšå±¤ã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type LayerType = {
  readonly value: string;
  readonly validatedByPattern: boolean;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  isValidForDirective(directive: DirectiveType): boolean;
  
  // ãƒ‘ã‚¹è§£æ±ºå°‚ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getPromptFilename(fromLayerType: string, adaptation?: string): string;
  getSchemaFilename(): string;
  isValidForResourcePath(): boolean;
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: LayerType): boolean;
  toString(): string;
}

/**
 * ConfigProfileName - è¨­å®šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type ConfigProfileName = {
  readonly value: string;
  readonly isDefault: boolean;
  readonly prefix: string | null;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getConfigPath(): string;
  getDirectiveTypes(): readonly DirectiveType[];
  getLayerTypes(): readonly LayerType[];
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: ConfigProfileName): boolean;
  toString(): string;
}

/**
 * PromptTemplatePath - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ã‚¹ã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type PromptTemplatePath = {
  readonly fullPath: string;
  readonly status: PathResolutionStatus;
  readonly metadata: PathResolutionMetadata;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  exists(): boolean;
  getDirectory(): string;
  getFilename(): string;
  toString(): string;
}

/**
 * PromptVariables - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type PromptVariables = {
  readonly inputContent: string;
  readonly inputFilePath?: string;
  readonly outputFilePath?: string;
  readonly schemaContent: string;
  readonly promptFilePath: string;
  readonly inputSource: InputSource;
  readonly uv: Record<string, string>;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  hasInputFile(): boolean;
  hasCustomVariables(): boolean;
  getVariableKeys(): string[];
  toPromptParams(): PromptParams;
}
```

#### æ”¯æ´ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

```typescript
/**
 * TwoParams - 2ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†ã®ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type TwoParams = {
  readonly directive: DirectiveType;
  readonly layer: LayerType;
  readonly profile: ConfigProfileName;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  toCommand(): BreakdownCommand;
  validate(): Result<void, TwoParamsValidationError>;
  getPromptPath(fromLayerType?: string, adaptation?: string): PromptPath;
  getSchemaPath(): SchemaPath;
  equals(other: TwoParams): boolean;
}

/**
 * BreakdownConfig - è¨­å®šã‚’è¡¨ã™ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
type BreakdownConfig = {
  readonly profileName: ConfigProfileName;
  readonly app_prompt: PromptConfig;
  readonly app_schema: SchemaConfig;
  readonly customConfig: CustomConfig;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getPromptBaseDirectory(): string;
  getSchemaBaseDirectory(): string;
  getPatternConfig(): PatternConfig;
  isValidTwoParams(directive: string, layer: string): boolean;
}
```

### ç¬¬3ç« ï¼šãƒ¦ãƒ‹ã‚ªãƒ³å‹è¨­è¨ˆ

#### ã‚³ãƒãƒ³ãƒ‰è§£æçµæœã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹

```typescript
// =============================================================================
// Union Types - ãƒ‰ãƒ¡ã‚¤ãƒ³ã®é¸æŠè‚¢ã‚’è¡¨ç¾
// =============================================================================

/**
 * BreakdownParamsResult - CLIè§£æçµæœã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type BreakdownParamsResult = 
  | { type: "zero"; data: ZeroParamsResult }
  | { type: "one"; data: OneParamsResult }
  | { type: "two"; data: TwoParamsResult };

/**
 * ZeroParamsResult - ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±è¡¨ç¤ºã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type ZeroParamsResult = 
  | { kind: "help"; options: SystemOptions }
  | { kind: "version"; options: SystemOptions };

/**
 * OneParamsResult - ç®¡ç†æ“ä½œã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type OneParamsResult = 
  | { kind: "init"; options: ManagementOptions }
  | { kind: "copy"; options: ManagementOptions }
  | { kind: "delete"; options: ManagementOptions };

/**
 * TwoParamsResult - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type TwoParamsResult = {
  kind: "prompt-generation";
  params: TwoParams;
  options: PromptVariableSource;
};
```

#### ãƒ‘ã‚¹è§£æ±ºçµæœã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹

```typescript
/**
 * PathResolutionResult - ãƒ‘ã‚¹è§£æ±ºçµæœã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type PathResolutionResult = 
  | { status: "found"; path: PromptTemplatePath }
  | { status: "fallback"; path: PromptTemplatePath; reason: string }
  | { status: "error"; error: PathResolutionError };

/**
 * PathResolutionStatus - ãƒ‘ã‚¹è§£æ±ºçŠ¶æ…‹ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type PathResolutionStatus = 
  | "Found"
  | "Fallback"
  | "Error";

/**
 * InputSource - å…¥åŠ›æºã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type InputSource = 
  | "file"
  | "stdin"
  | "both";
```

#### ã‚¨ãƒ©ãƒ¼ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹

```typescript
/**
 * BreakdownError - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¨ãƒ©ãƒ¼ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type BreakdownError = 
  | { domain: "cli-parsing"; error: CLIParsingError }
  | { domain: "config-management"; error: ConfigError }
  | { domain: "prompt-path-resolution"; error: PathResolutionError }
  | { domain: "prompt-variable-generation"; error: VariableGenerationError }
  | { domain: "prompt-generation"; error: PromptGenerationError }
  | { domain: "stdout-output"; error: OutputError };

// æ³¨æ„ï¼šä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼å‹ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å¯¾è±¡å¤–
// | { domain: "prompt-execution"; error: PromptExecutionError }
// | { domain: "ai-response-processing"; error: ResponseProcessingError }

/**
 * PathResolutionError - ãƒ‘ã‚¹è§£æ±ºã‚¨ãƒ©ãƒ¼ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type PathResolutionError = 
  | { kind: "InvalidParameterCombination"; directive: string; layer: string }
  | { kind: "BaseDirectoryNotFound"; baseDir: string }
  | { kind: "TemplateFileNotFound"; templatePath: string }
  | { kind: "FallbackExhausted"; attemptedPaths: string[] };

/**
 * VariableGenerationError - å¤‰æ•°ç”Ÿæˆã‚¨ãƒ©ãƒ¼ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
 */
type VariableGenerationError = 
  | { kind: "FileNotFound"; filePath: string }
  | { kind: "FileReadError"; filePath: string; reason: string }
  | { kind: "STDINTimeout"; timeoutMs: number }
  | { kind: "InvalidCustomVariable"; key: string; value: string };
```

### ç¬¬4ç« ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³é–“ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### å®Œå…¨ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```mermaid
sequenceDiagram
    participant CLI as CLIå¼•æ•°è§£æãƒ‰ãƒ¡ã‚¤ãƒ³
    participant CONFIG as è¨­å®šç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³
    participant PATH as ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¹æ±ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³
    participant VARS as ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³
    participant PROMPT as ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³
    participant OUTPUT as æ¨™æº–å‡ºåŠ›ãƒ‰ãƒ¡ã‚¤ãƒ³
    
    Note over CLI,OUTPUT: Breakdown CLIã®ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆâ†’æ¨™æº–å‡ºåŠ›ã¾ã§ï¼‰

    Note over CLI: CLIå¼•æ•° â†’ BreakdownParamsResult
    CLI->>CONFIG: ConfigProfileName
    CONFIG->>CLI: BreakdownConfig
    
    Note over CLI: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ â†’ TwoParamsResult
    CLI->>PATH: PathResolutionOption
    CLI->>VARS: PromptVariableSource
    
    Note over PATH: ãƒ‘ã‚¹è§£æ±º â†’ PromptTemplatePath
    PATH->>CONFIG: è¨­å®šå€¤è¦æ±‚
    CONFIG->>PATH: app_prompt.base_dir
    PATH->>VARS: PromptTemplatePath
    
    Note over VARS: å¤‰æ•°ç”Ÿæˆ â†’ PromptVariables
    VARS->>PROMPT: PromptVariables
    
    Note over PROMPT: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ â†’ GeneratedPrompt
    PROMPT->>OUTPUT: GeneratedPrompt
    
    Note over OUTPUT: æ¨™æº–å‡ºåŠ› â†’ å®Œäº†
    
    rect rgb(240, 240, 240)
        Note over OUTPUT: ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯¾è±¡å¤–ã€‘<br/>AIå®Ÿè¡Œãƒ»å¿œç­”å‡¦ç†ã¯<br/>Breakdown CLIã®ç¯„å›²å¤–
    end
```

#### æ®µéšçš„ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    subgraph INPUT ["Input Layer"]
        A["CLI Args: string[]"]
        B["Config Profile"]
    end
    
    subgraph PARSING ["Parsing Layer"]
        C["BreakdownParamsResult"]
        D["TwoParamsResult"]
        E["PromptVariableSource"]
    end
    
    subgraph RESOLUTION ["Resolution Layer"]
        F["PathResolutionOption"]
        G["PromptTemplatePath"]
        H["BreakdownConfig"]
    end
    
    subgraph GENERATION ["Generation Layer"]
        I["PromptVariables"]
        J["PromptParams"]
    end
    
    subgraph OUTPUT ["Output Layer (Breakdown CLI Scope)"]
        K["GeneratedPrompt"]
        L["StandardOutput"]
    end
    
    subgraph OUTSCOPE ["Out of Scope"]
        M["AI Execution"]
        N["AI Response"]
    end
    
    A --> C
    B --> H
    C --> D
    D --> E
    D --> F
    H --> G
    F --> G
    G --> I
    E --> I
    I --> J
    J --> K
    K --> L
    
    %% å¯¾è±¡å¤–ã®ä¾å­˜é–¢ä¿‚ï¼ˆç‚¹ç·šï¼‰
    L -.-> M
    M -.-> N
    
    style A fill:#e1f5fe
    style L fill:#e8f5e8
    style G fill:#fff3e0
    style I fill:#fce4ec
    style M fill:#f9f9f9,stroke:#999,stroke-dasharray:5,5
    style N fill:#f9f9f9,stroke:#999,stroke-dasharray:5,5
```

### ç¬¬5ç« ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œã®è©³ç´°ä»•æ§˜

#### 1. CLIå¼•æ•°è§£æãƒ‰ãƒ¡ã‚¤ãƒ³ â†’ è¨­å®šç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// å¢ƒç•Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface CLIToConfigBoundary {
  // å…¥åŠ›
  configProfileName: ConfigProfileName;
  
  // å‡ºåŠ›
  breakdownConfig: BreakdownConfig;
  
  // å¥‘ç´„
  loadConfig(profileName: ConfigProfileName): Result<BreakdownConfig, ConfigError>;
}

// ãƒ‡ãƒ¼ã‚¿å¤‰æ›
const transformCLIToConfig = (args: string[]): ConfigProfileName => {
  const configOption = extractConfigOption(args);
  return ConfigProfileName.create(configOption ?? "breakdown");
};
```

#### 2. è¨­å®šç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¹æ±ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// å¢ƒç•Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface ConfigToPathBoundary {
  // å…¥åŠ›
  pathResolutionOption: PathResolutionOption;
  breakdownConfig: BreakdownConfig;
  
  // å‡ºåŠ›
  promptTemplatePath: PromptTemplatePath;
  
  // å¥‘ç´„
  resolvePath(
    option: PathResolutionOption, 
    config: BreakdownConfig
  ): Result<PromptTemplatePath, PathResolutionError>;
}

// ãƒ‡ãƒ¼ã‚¿å¤‰æ›
const transformConfigToPath = (
  twoParams: TwoParams,
  config: BreakdownConfig
): PathResolutionOption => {
  return {
    adaptation: twoParams.options.adaptation,
    baseDirectory: config.app_prompt.base_dir,
    directive: twoParams.params.directive,
    layer: twoParams.params.layer
  };
};
```

#### 3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¹æ±ºå®šãƒ‰ãƒ¡ã‚¤ãƒ³ â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// å¢ƒç•Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface PathToVariablesBoundary {
  // å…¥åŠ›
  promptTemplatePath: PromptTemplatePath;
  promptVariableSource: PromptVariableSource;
  
  // å‡ºåŠ›
  promptVariables: PromptVariables;
  
  // å¥‘ç´„
  generateVariables(
    templatePath: PromptTemplatePath,
    source: PromptVariableSource
  ): Result<PromptVariables, VariableGenerationError>;
}

// ãƒ‡ãƒ¼ã‚¿å¤‰æ›
const transformPathToVariables = (
  templatePath: PromptTemplatePath,
  source: PromptVariableSource
): PromptVariables => {
  return {
    inputContent: source.fromFile ? readFile(source.fromFile) : source.stdinContent ?? "",
    inputFilePath: source.fromFile ? resolve(source.fromFile) : undefined,
    outputFilePath: source.destinationFile ? resolve(source.destinationFile) : undefined,
    schemaContent: source.useSchema ? readSchemaFile(templatePath) : "",
    promptFilePath: templatePath.fullPath,
    inputSource: determineInputSource(source),
    uv: source.customVariables ?? {}
  };
};
```

#### 4. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³ â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// å¢ƒç•Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface VariablesToPromptBoundary {
  // å…¥åŠ›
  promptVariables: PromptVariables;
  
  // å‡ºåŠ›
  generatedPrompt: GeneratedPrompt;
  
  // å¥‘ç´„
  generatePrompt(
    variables: PromptVariables
  ): Result<GeneratedPrompt, PromptGenerationError>;
}

// ãƒ‡ãƒ¼ã‚¿å¤‰æ›
const transformVariablesToPrompt = (
  variables: PromptVariables
): PromptParams => {
  return {
    template_file: variables.promptFilePath,
    variables: {
      inputContent: variables.inputContent,
      inputFilePath: variables.inputFilePath ?? "",
      outputFilePath: variables.outputFilePath ?? "",
      schemaContent: variables.schemaContent,
      inputSource: variables.inputSource,
      ...variables.uv
    }
  };
};
```

#### 5. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³ â†’ æ¨™æº–å‡ºåŠ›ãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// å¢ƒç•Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface PromptToOutputBoundary {
  // å…¥åŠ›
  generatedPrompt: GeneratedPrompt;
  
  // å‡ºåŠ›
  outputResult: StandardOutputResult;
  
  // å¥‘ç´„
  outputToStdout(
    prompt: GeneratedPrompt
  ): Result<StandardOutputResult, OutputError>;
}

// ãƒ‡ãƒ¼ã‚¿å¤‰æ›
const transformPromptToOutput = (
  prompt: GeneratedPrompt
): StandardOutputData => {
  return {
    content: prompt.content,
    metadata: prompt.metadata,
    timestamp: new Date().toISOString()
  };
};
```

#### æ³¨æ„ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³

```typescript
// ä»¥ä¸‹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯Breakdown CLIã®å¯¾è±¡å¤–
// 
// interface PromptExecutionBoundary {
//   // AIå®Ÿè¡Œã‚µãƒ¼ãƒ“ã‚¹ï¼ˆClaude, GPTç­‰ï¼‰ã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡
//   executeWithAI(prompt: GeneratedPrompt): Result<AIResponse, AIError>;
// }
// 
// interface ResponseProcessingBoundary {
//   // AIå¿œç­”ã®å‡¦ç†ãƒ»æ•´å½¢
//   processResponse(response: AIResponse): Result<ProcessedResult, ProcessingError>;
// }
// 
// Breakdown CLIã®è²¬å‹™ç¯„å›²ï¼š
// ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ â†’ æ¨™æº–å‡ºåŠ› ã¾ã§
```

### ç¬¬6ç« ï¼šã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¢ƒç•Œè¨­è¨ˆ

#### ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã‚¨ãƒ©ãƒ¼ä¼æ’­

```typescript
// ã‚¨ãƒ©ãƒ¼ä¼æ’­ã®å‹å®‰å…¨ãªè¨­è¨ˆ
type DomainErrorPropagation = {
  // å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚¨ãƒ©ãƒ¼ã‚’ä¸Šä½ã«ä¼æ’­
  propagate<T extends BreakdownError>(error: T): BreakdownError;
  
  // ã‚¨ãƒ©ãƒ¼å›å¾©æˆ¦ç•¥
  recover<T extends BreakdownError>(error: T): RecoveryAction;
  
  // ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®è±Šå¯ŒåŒ–
  enrich<T extends BreakdownError>(error: T, context: ErrorContext): T;
};

// å›å¾©æˆ¦ç•¥ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹
type RecoveryAction = 
  | { kind: "retry"; maxAttempts: number }
  | { kind: "fallback"; alternativePath: string }
  | { kind: "user-intervention"; message: string }
  | { kind: "abort"; reason: string };
```

#### å¢ƒç•Œã§ã®ã‚¨ãƒ©ãƒ¼å¤‰æ›

```mermaid
flowchart TD
    subgraph "Domain A"
        A1[Domain A Error]
    end
    
    subgraph "Boundary"
        B1[Error Transformation]
        B2[Context Enrichment]
        B3[Recovery Strategy]
    end
    
    subgraph "Domain B"
        C1[Domain B Error]
        C2[Error Handling]
        C3[Fallback Logic]
    end
    
    A1 --> B1
    B1 --> B2
    B2 --> B3
    B3 --> C1
    C1 --> C2
    C2 --> C3
    
    style A1 fill:#ffcdd2
    style B1 fill:#fff3e0
    style C1 fill:#ffcdd2
```

### ç¬¬7ç« ï¼šå¢ƒç•Œã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. Smart Constructor ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// å¢ƒç•Œã§ã®å‹å®‰å…¨ãªç”Ÿæˆ
namespace DirectiveType {
  export function create(
    value: string,
    profile: ConfigProfileName
  ): Result<DirectiveType, InvalidDirectiveError> {
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if (!isValidDirective(value, profile)) {
      return Result.error({
        kind: "InvalidDirective",
        value,
        profile,
        validDirectives: getValidDirectives(profile)
      });
    }
    
    // æˆåŠŸæ™‚ã®ç”Ÿæˆ
    return Result.ok({
      value,
      profile,
      validatedByPattern: true,
      isValidForProfile: (p) => p.equals(profile),
      getPromptDirectory: (baseDir, layer) => `${baseDir}/${value}/${layer.value}`,
      equals: (other) => other.value === value && other.profile.equals(profile),
      toString: () => value
    });
  }
}
```

#### 2. Factory ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// å¢ƒç•Œã§ã®è¤‡é›‘ãªç”Ÿæˆå‡¦ç†
class PromptVariablesFactory {
  create(
    templatePath: PromptTemplatePath,
    source: PromptVariableSource,
    config: BreakdownConfig
  ): Result<PromptVariables, VariableGenerationError> {
    try {
      // æ®µéšçš„ãªå¤‰æ›
      const inputProcessing = this.processInput(source);
      const pathResolution = this.resolvePaths(source, config);
      const schemaProcessing = this.processSchema(templatePath, source);
      const variableIntegration = this.integrateVariables(
        inputProcessing,
        pathResolution,
        schemaProcessing,
        source
      );
      
      return Result.ok(variableIntegration);
    } catch (error) {
      return Result.error(this.convertError(error));
    }
  }
}
```

#### 3. Strategy ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// å¢ƒç•Œã§ã®å‡¦ç†æˆ¦ç•¥ã®é¸æŠ
interface PathResolutionStrategy {
  resolve(
    option: PathResolutionOption,
    config: BreakdownConfig
  ): Result<PromptTemplatePath, PathResolutionError>;
}

class StandardPathResolutionStrategy implements PathResolutionStrategy {
  resolve(
    option: PathResolutionOption,
    config: BreakdownConfig
  ): Result<PromptTemplatePath, PathResolutionError> {
    // æ¨™æº–çš„ãªãƒ‘ã‚¹è§£æ±ºãƒ­ã‚¸ãƒƒã‚¯
    const basePath = config.app_prompt.base_dir;
    const directoryPath = `${basePath}/${option.directive.value}/${option.layer.value}`;
    const fileName = this.buildFileName(option);
    const fullPath = `${directoryPath}/${fileName}`;
    
    return this.validatePath(fullPath);
  }
}
```

### ã‚¨ãƒ”ãƒ­ãƒ¼ã‚°ï¼šå¢ƒç•Œã®ä¾¡å€¤

ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œè¨­è¨ˆã«ã‚ˆã‚Šã€Breakdown CLIã¯ä»¥ä¸‹ã®ä¾¡å€¤ã‚’å®Ÿç¾ã—ã¾ã™ï¼š

#### 1. æ˜ç¢ºãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—
- **ç¯„å›²ã®æ˜ç¢ºåŒ–**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‹ã‚‰æ¨™æº–å‡ºåŠ›ã¾ã§
- **è²¬å‹™ã®é™å®š**: AIå®Ÿè¡Œãƒ»å¿œç­”å‡¦ç†ã¯å¯¾è±¡å¤–
- **å¢ƒç•Œã®æ˜ç¤º**: ä½•ã‚’è¡Œã„ã€ä½•ã‚’è¡Œã‚ãªã„ã‹ã®æ˜ç¢ºåŒ–

#### 2. å‹å®‰å…¨æ€§ã®ç¢ºä¿
- ãƒãƒªãƒ¥ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã‚‹ä¸å¤‰æ€§
- ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã«ã‚ˆã‚‹çŠ¶æ…‹ã®æ˜ç¢ºåŒ–
- Smart Constructorã«ã‚ˆã‚‹ç”Ÿæˆæ™‚ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

#### 3. è²¬å‹™ã®æ˜ç¢ºåŒ–
- å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å˜ä¸€è²¬ä»»
- å¢ƒç•Œã§ã®æ˜ç¢ºãªãƒ‡ãƒ¼ã‚¿å¤‰æ›
- ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å±€æ‰€åŒ–

#### 4. æ‹¡å¼µæ€§ã®å®Ÿç¾
- æ–°ã—ã„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¿½åŠ å®¹æ˜“æ€§
- æ—¢å­˜å¢ƒç•Œã¸ã®å½±éŸ¿æœ€å°åŒ–
- è¨­å®šã«ã‚ˆã‚‹å‹•çš„ãªæŒ™å‹•å¤‰æ›´

#### 5. ä¿å®ˆæ€§ã®å‘ä¸Š
- ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®ç”¨èªã«ã‚ˆã‚‹ç†è§£ä¿ƒé€²
- å¢ƒç•Œã§ã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã®é›†ç´„
- ãƒ†ã‚¹ãƒˆå¯èƒ½ãªè¨­è¨ˆ

#### 6. çµ±åˆã®å®¹æ˜“æ€§
- æ¨™æº–å‡ºåŠ›ã«ã‚ˆã‚‹ä»–ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æº
- ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã¸ã®çµ„ã¿è¾¼ã¿
- å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®ç–çµåˆ


----

ã“ã“ã¾ã§å®Ÿä¾‹-1

----



# å®Ÿä¾‹-2

ä»¥ä¸‹ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã‚‚ã€GitHub Copilot ã®Claude Sonnet 4 ã§å‡ºåŠ›ã—ã¾ã—ãŸã€‚

å®šç¾©ã‚’ä½œæˆã™ã‚‹å‰ã«ã€AIãŒç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ææ–™ã¨ã—ã¦ä½¿ã„ã¾ã—ãŸã€‚ã€Œå®Ÿä¾‹-1ã€ã¨ã®é•ã„ã¯ã€AIãŒç”Ÿæˆã—ãŸé‡è¤‡ã‚³ãƒ¼ãƒ‰ã‚’é‡è¦æ€§åˆ†æã«æ´»ç”¨ã—ãŸç‚¹ã§ã™ã€‚

æœ€åˆã®ä¸­æ ¸éƒ¨åˆ†ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«ã€éå¸¸ã«åŠ´åŠ›ãŒã‹ã‹ã‚Šã¾ã—ãŸã€‚
ã€Œæœ€åˆã‹ã‚‰è¦‹ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã„ã¦ã€å®Ÿã¯è¦‹ãˆã¦ã„ãªã„çŠ¶æ…‹ã€ãŒç¶šããŸã‚ã€ç´å¾—ã®å®šç¾©ãŒAIå‡ºåŠ›ã•ã‚Œã‚‹ã¾ã§ã€åŠ´åŠ›ã‚’è¦ã—ã¾ã—ãŸã€‚
ä»£ã‚ã‚Šã«ã€ä¸­æ ¸ãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã‹ã‚‰ã€ç·åˆçš„ãªãƒ‰ãƒ¡ã‚¤ãƒ³å®šç¾©ã«åºƒã’ã¦ã„ãã“ã¨ã¯é›£ã—ãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

ã“ã®å®Ÿä¾‹-2ã‚‚ã€AIå‡ºåŠ›ãã®ã¾ã¾ã§ã™ã€‚å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚„é–¢ä¿‚æ€§ã®è¡¨ç¾ã‚‚çš„ç¢ºã§ã™ã€‚ï¼ˆä¸€éƒ¨çœç•¥ã—ã¦æ²è¼‰ï¼‰

----

ã“ã“ã‹ã‚‰å®Ÿä¾‹-2

----



## layerTypeã¨DirectiveType

### ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ - CLIã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¸ã®å¤‰æ›

#### å…·ä½“ä¾‹ã§ç†è§£ã™ã‚‹å‡¦ç†ã®æµã‚Œ

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ `breakdown to issue` ã‚’å®Ÿè¡Œã—ãŸã¨ãã€ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ï¼š

1. **CLIå¼•æ•°ã®å—ä¿¡**: `["to", "issue"]`
2. **è¨­å®šèª­ã¿è¾¼ã¿**: ProfileNameã«åŸºã¥ãBreakdownConfigå–å¾—
3. **ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°**: è¨­å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å¼•æ•°ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
4. **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ**: æ¤œè¨¼æ¸ˆã¿ã®TwoParamsä½œæˆ
5. **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹è§£æ±º**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰¹å®š
6. **å®Ÿè¡Œ**: `prompts/to/issue/f_issue.md` ã¨ `schemas/to/issue/base.schema.json` ã‚’ä½¿ç”¨

ã“ã®ä¸€é€£ã®æµã‚Œã«ãŠã„ã¦ã€**DirectiveTypeï¼ˆ"to"ï¼‰ã¨LayerTypeï¼ˆ"issue"ï¼‰** ã¯ã€å˜ãªã‚‹æ–‡å­—åˆ—ã‹ã‚‰**å‹å®‰å…¨ã§ä¿¡é ¼æ€§ã®é«˜ã„ãƒ‰ãƒ¡ã‚¤ãƒ³å€¤**ã¸ã¨å¤‰æ›ã•ã‚Œã€æœ€çµ‚çš„ã«**ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®å…·ä½“çš„ãªãƒªã‚½ãƒ¼ã‚¹**ã‚’ç‰¹å®šã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚

#### ãªãœã€Œ2ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãªã®ã‹

Breakdownã«ãŠã„ã¦ã€**å‡¦ç†æ–¹å‘ï¼ˆDirectiveTypeï¼‰** ã¨ **éšå±¤ï¼ˆLayerTypeï¼‰** ã®çµ„ã¿åˆã‚ã›ã¯ã€AIé–‹ç™ºæ”¯æ´ã®ä¸­æ ¸çš„ãªæ¦‚å¿µã§ã™ï¼š

- **DirectiveType**: ã€Œä½•ã‚’ã™ã‚‹ã‹ã€ï¼ˆto=å¤‰æ›, summary=è¦ç´„, defect=æ¬ é™¥æ¤œå‡ºï¼‰
- **LayerType**: ã€Œã©ã®ãƒ¬ãƒ™ãƒ«ã§ã€ï¼ˆproject=ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“, issue=èª²é¡Œå˜ä½, task=ã‚¿ã‚¹ã‚¯å˜ä½ï¼‰

ã“ã®2ã¤ã®è»¸ãŒäº¤å·®ã™ã‚‹ã“ã¨ã§ã€å…·ä½“çš„ãªå‡¦ç†å†…å®¹ãŒæ±ºå®šã•ã‚Œã€é©åˆ‡ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ãŒç‰¹å®šã•ã‚Œã¾ã™ã€‚

### ä¸­æ ¸æ¦‚å¿µ - TwoParams

#### ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã®TwoParams

TwoParamsã¯ã€CLIã®argsãŒBreakdownConfigã¨BreakdownParamsã‚’çµŒç”±ã—ã¦å¾—ã‚‰ã‚Œã‚‹2ã¤ã®å˜ä¸€å€¤ï¼ˆDirectiveTypeã¨LayerTypeï¼‰ã®çµ„ã¿åˆã‚ã›ã‚’è¡¨ã™ãƒ‰ãƒ¡ã‚¤ãƒ³å‹ã§ã™ã€‚ä¸¡è€…ã¨ã‚‚ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã£ã¦ãƒãƒªãƒ‡ãƒ¼ãƒˆã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å…¨ä½“ã§ä¸€è²«ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹ä¸å¤‰ã®å€¤ã§ã™ã€‚

#### å‹å®šç¾© - ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¡¨ç¾

```typescript
// =============================================================================
// TwoParams - 2ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å‹
// =============================================================================

/**
 * TwoParams - DirectiveTypeã¨LayerTypeã®çµ„ã¿åˆã‚ã›ã‚’è¡¨ã™ãƒ‰ãƒ¡ã‚¤ãƒ³å‹
 * 
 * ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚å¿µ:
 * - Breakdownã‚³ãƒãƒ³ãƒ‰ã®ä¸­æ ¸çš„ãªå‡¦ç†å˜ä½
 * - å‡¦ç†æ–¹å‘ï¼ˆDirectiveTypeï¼‰ã¨éšå±¤ï¼ˆLayerTypeï¼‰ã®çµ„ã¿åˆã‚ã›
 * - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¨ã‚¹ã‚­ãƒ¼ãƒè§£æ±ºã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
 * 
 * è¨­è¨ˆç†å¿µ:
 * - CLIå¼•æ•°ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã¸ã®æ©‹æ¸¡ã—
 * - ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ä¿¡é ¼æ€§ä¿è¨¼
 * - å‹å®‰å…¨ãªãƒ‘ã‚¹è§£æ±ºã®å®Ÿç¾
 */
type TwoParams = {
  readonly directive: DirectiveType;
  readonly layer: LayerType;
  readonly profile: ConfigProfileName;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  toCommand(): BreakdownCommand;
  validate(): Result<void, TwoParamsValidationError>;
  
  // ãƒ‘ã‚¹è§£æ±ºæ©Ÿèƒ½ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  getPromptPath(fromLayerType?: string, adaptation?: string): PromptPath;
  getSchemaPath(): SchemaPath;
  resolvePromptFilePath(baseDir: string, fromLayerType?: string, adaptation?: string): string;
  resolveSchemaFilePath(baseDir: string): string;
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: TwoParams): boolean;
  toString(): string;
}
```

#### DirectiveTypeã¨LayerType - æ§‹æˆè¦ç´ ã®è©³ç´°

```typescript
/**
 * DirectiveType - å‡¦ç†æ–¹å‘ã‚’è¡¨ã™ãƒ‰ãƒ¡ã‚¤ãƒ³å‹
 * 
 * å½¹å‰²: ã€Œä½•ã‚’ã™ã‚‹ã‹ã€ã‚’æ±ºå®š
 * ä¾‹: "to"(å¤‰æ›), "summary"(è¦ç´„), "defect"(æ¬ é™¥æ¤œå‡º)
 */
type DirectiveType = {
  readonly value: string;
  readonly profile: ConfigProfileName;
  readonly validatedByPattern: boolean;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  isValidForProfile(profile: ConfigProfileName): boolean;
  
  // ãƒ‘ã‚¹è§£æ±ºå°‚ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getPromptDirectory(baseDir: string, layer: LayerType): string;
  getSchemaDirectory(baseDir: string, layer: LayerType): string;
  isValidForResourcePath(): boolean;
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: DirectiveType): boolean;
  toString(): string;
}

/**
 * LayerType - éšå±¤ã‚’è¡¨ã™ãƒ‰ãƒ¡ã‚¤ãƒ³å‹
 * 
 * å½¹å‰²: ã€Œã©ã®ãƒ¬ãƒ™ãƒ«ã§ã€ã‚’æ±ºå®š
 * ä¾‹: "project"(ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ), "issue"(èª²é¡Œ), "task"(ã‚¿ã‚¹ã‚¯)
 */
type LayerType = {
  readonly value: string;
  readonly validatedByPattern: boolean;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  isValidForDirective(directive: DirectiveType): boolean;
  
  // ãƒ‘ã‚¹è§£æ±ºå°‚ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getPromptFilename(fromLayerType: string, adaptation?: string): string;
  getSchemaFilename(): string;
  isValidForResourcePath(): boolean;
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: LayerType): boolean;
  toString(): string;
}

/**
 * ConfigProfileName - è¨­å®šãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ã™ãƒ‰ãƒ¡ã‚¤ãƒ³å‹
 * 
 * å½¹å‰²: è¨­å®šã®åˆ‡ã‚Šæ›¿ãˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
 * ä¾‹: "breakdown"(æ¨™æº–), "search"(æ¤œç´¢), "custom"(ã‚«ã‚¹ã‚¿ãƒ )
 */
type ConfigProfileName = {
  readonly value: string;
  readonly isDefault: boolean;
  readonly prefix: string | null;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ
  getConfigPath(): string;
  getDirectiveTypes(): readonly DirectiveType[];
  getLayerTypes(): readonly LayerType[];
  
  // å‹å®‰å…¨ãªæ¯”è¼ƒ
  equals(other: ConfigProfileName): boolean;
  toString(): string;
}
```

### ä¿¡é ¼æ€§ã®ç¢ºä¿ - ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥

Breakdownã§ã¯ã€CLIå¼•æ•°ã‚’ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹ã®ã§ã¯ãªãã€**ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**ã«ã‚ˆã‚Šä¿¡é ¼æ€§ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ï¼š

```
ProfileName â†’ BreakdownConfig â†’ CustomConfig.two.ParamsConfig
     â†“              â†“                      â†“
CLI args â†’ BreakdownParams (pattern validation) â†’ TwoParamsResult
     â†“                                                    â†“
TwoParams â†’ DirectiveType + LayerType (pattern-validated)
```

#### ãªãœãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªã®ã‹

1. **è¨­å®šã®æŸ”è»Ÿæ€§**: ç’°å¢ƒã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç•°ãªã‚‹å€¤ã‚’è¨±å¯
2. **å“è³ªä¿è¨¼**: ä¸æ­£ãªå€¤ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’äº‹å‰ã«é˜²æ­¢
3. **æ‹¡å¼µæ€§**: æ–°ã—ã„DirectiveTypeã‚„LayerTypeã‚’è¨­å®šã§è¿½åŠ å¯èƒ½
4. **ä¸€è²«æ€§**: ProfileNameã«ã‚ˆã‚‹è¨­å®šåˆ‡ã‚Šæ›¿ãˆã§ç’°å¢ƒåˆ¥å¯¾å¿œ

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

```typescript
/**
 * TwoParamsæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ - ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä»˜ãã‚¨ãƒ©ãƒ¼æƒ…å ±
 */
type TwoParamsValidationError = 
  | { kind: "InvalidDirective"; directive: string; profile: ConfigProfileName; pattern: string; }
  | { kind: "InvalidLayer"; layer: string; pattern: string; }
  | { kind: "UnsupportedCombination"; directive: string; layer: string; profile: ConfigProfileName; }
  | { kind: "PatternNotFound"; profile: ConfigProfileName; configPath: string; }

/**
 * DirectiveTypeæ¤œè¨¼ã‚¨ãƒ©ãƒ¼
 */
type InvalidDirectiveError = {
  kind: "InvalidDirective";
  value: string;
  profile: ConfigProfileName;
  pattern: string;
  validDirectives: string[];
}

/**
 * LayerTypeæ¤œè¨¼ã‚¨ãƒ©ãƒ¼
 */
type InvalidLayerError = {
  kind: "InvalidLayer";
  value: string;
  pattern: string;
  validLayers: string[];
}
```

### å®Ÿç”¨æ€§ã®å®Ÿç¾ - ãƒ‘ã‚¹è§£æ±ºã‚·ã‚¹ãƒ†ãƒ 

#### DirectiveTypeã¨LayerTypeã®å®Ÿéš›ã®æ´»ç”¨

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆã¿ã®DirectiveTypeã¨LayerTypeã¯ã€**ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ãƒªã‚½ãƒ¼ã‚¹é…ç½®ã¨å¯†æ¥ã«é–¢é€£ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚å¿µ**ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å€¤ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚„ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®**ãƒ‘ã‚¹è§£æ±ºã«ãŠã„ã¦é‡è¦ãªãƒ‰ãƒ¡ã‚¤ãƒ³ç”¨èª**ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

#### ãƒ‘ã‚¹è§£æ±ºã®ä»•çµ„ã¿

ãƒ‘ã‚¹è§£æ±ºã¯ä»¥ä¸‹ã®4ã¤ã®å¤‰æ•°ã®çµ„ã¿åˆã‚ã›ã§æ±ºå®šã•ã‚Œã¾ã™ï¼š

1. **è¨­å®šå€¤ï¼ˆbase_dirï¼‰** - `app_prompt.base_dir` ã¾ãŸã¯ `app_schema.base_dir`
2. **DirectiveType** - å‡¦ç†æ–¹å‘ï¼ˆto, summary, defect ãªã©ï¼‰
3. **LayerType** - éšå±¤ãƒ¬ãƒ™ãƒ«ï¼ˆproject, issue, task ãªã©ï¼‰
4. **ãã®ä»–ã®ä¿®é£¾å­** - fromLayerType, adaptation ãªã©

```typescript
// ãƒ‘ã‚¹è§£æ±ºå°‚ç”¨å‹å®šç¾©
type PromptPath = {
  readonly baseDir: string;           // app_prompt.base_dir (cwdèµ·ç‚¹)
  readonly directive: DirectiveType;  // "to", "summary", "defect" ãªã©
  readonly layer: LayerType;          // "project", "issue", "task" ãªã©
  readonly fromLayer: string;         // fromLayerType
  readonly adaptation?: string;       // adaptationä¿®é£¾å­ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  resolve(): string;
  resolveWithAdaptation(adaptation: string): string;
}

type SchemaPath = {
  readonly baseDir: string;           // app_schema.base_dir (cwdèµ·ç‚¹)
  readonly directive: DirectiveType;  // "to", "summary", "defect" ãªã©
  readonly layer: LayerType;          // "project", "issue", "task" ãªã©
  readonly schemaFile: string;        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: "base.schema.json"
  resolve(): string;
}
```

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ã®å¯¾å¿œ

```
TwoParams (pattern-validated) â†’ {base_dir}/{directive}/{layer}/filename

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ/
â”œâ”€â”€ prompts/           # app_prompt.base_dir
â”‚   â”œâ”€â”€ to/           # DirectiveType
â”‚   â”‚   â”œâ”€â”€ project/  # LayerType
â”‚   â”‚   â”œâ”€â”€ issue/    # LayerType
â”‚   â”‚   â””â”€â”€ task/     # LayerType
â”‚   â”œâ”€â”€ summary/      # DirectiveType
â”‚   â””â”€â”€ defect/       # DirectiveType
â””â”€â”€ schemas/          # app_schema.base_dir
    â”œâ”€â”€ to/           # DirectiveType
    â”‚   â”œâ”€â”€ project/  # LayerType
    â”‚   â”œâ”€â”€ issue/    # LayerType
    â”‚   â””â”€â”€ task/     # LayerType
    â”œâ”€â”€ summary/      # DirectiveType
    â””â”€â”€ defect/       # DirectiveType
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ã®ä¸€è²«æ€§

```
TwoParams (å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)
â”œâ”€â”€ DirectiveType (ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼æ¸ˆã¿å˜ä¸€å€¤) - "to", "summary", "defect" ãªã©
â””â”€â”€ LayerType (ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼æ¸ˆã¿å˜ä¸€å€¤) - "project", "issue", "task" ãªã©

ç‰¹å¾´ï¼š
- BreakdownConfigã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ¤œè¨¼æ¸ˆã¿
- ProfileNameã«ã‚ˆã£ã¦åˆ©ç”¨å¯èƒ½ãªå€¤ãŒæ±ºå®š
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ä¸å¤‰
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ç¢ºå®Ÿãªã‚¢ã‚¯ã‚»ã‚¹
```

ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å‹å®šç¾©ã«ã‚ˆã‚Šã€TwoParamsãŒDirectiveTypeã¨LayerTypeã®2ã¤ã‚’æŒã¤ã¨ã„ã†é–¢ä¿‚æ€§ãŒå‹å®‰å…¨ã«è¡¨ç¾ã•ã‚Œã€BreakdownConfigã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµŒãŸä¿¡é ¼æ€§ã®é«˜ã„ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ã•ã‚‰ã«ã€ã“ã‚Œã‚‰ã®å‹ã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰©ç†çš„ãªé…ç½®ã‚’æ±ºå®šã™ã‚‹é‡è¦ãªå½¹å‰²ã‚’æ‹…ã„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ç¢ºå®Ÿãªã‚¢ã‚¯ã‚»ã‚¹ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ProfileNameã«ã‚ˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆã«ã‚ˆã‚Šã€æŸ”è»Ÿãªè¨­å®šç®¡ç†ã¨ãƒªã‚½ãƒ¼ã‚¹é…ç½®ã®ä¸¡æ–¹ãŒå®Ÿç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚

----

ã“ã“ã¾ã§å®Ÿä¾‹-2

----



# çµ‚ã‚ã‚Šã«

ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨å…¨åŸŸæ€§ã‚’é‡è¦–ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ç†è§£ã—ã‚„ã™ãä¸€è²«ã—ãŸå®šç¾©ãŒã§ãã¾ã—ãŸã€‚ã“ã®å®šç¾©ã‚’å…ƒã«ã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚æ¹§ã„ã¦ãã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

ä»¥ä¸Šã€AIé–‹ç™ºã«ãŠã‘ã‚‹ã€æŠ½è±¡åº¦ã®é«˜ã„æ¦‚å¿µã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹æ–¹æ³•ã¨ã—ã¦ã€1ã¤ã®å‚è€ƒä¾‹ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚

