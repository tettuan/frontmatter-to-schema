---
title: "Claude Code Company 組成で、Cursor辞めた"
emoji: "💬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [cursor, claude, claudecode, automation]
published: true
---
次のように、13 pane で、Companyを作成した。

![Claude Code Company構成図](/images/2025-06-15-company.png =800x)

[Claude Codeを並列組織化してClaude Code "Company"にする](https://zenn.dev/kazuph/articles/beb87d102bd4f5)を参考にした。

Claude Code MAX ($200)なので、5 pane では少なく感じ、16paneではサボるメンバーが出るため、12メンバーに落ち着いた。

# 組織図

- 総司令官（メイン） 1名 : 黒
- マネージャー2名: コンテクスト維持
- サマリー役 1名: コンテクスト維持
- メンバー: 4,5 名をマネージャー配下へアサイン

## 役割

概ね、以下。


```
## サマリー役の役割

- マネージャーからの報告を受領
- 進捗の記録
- 状態のサマリー化
- 総司令官への定期報告

## メンバーの役割

- タスクの自立的な遂行
- 不明点のマネージャーへの確認
- サマリー担当者へ時々進捗報告
- 判明した事実や、失敗した事実のマネージャーへの報告
- 迷ったときの意思決定をマネージャーに仰ぐ

## 総司令官の役割

- 振る舞い:
  - 待ちたい時はpane一覧で部下の稼動を確認し、待機しないこと
- 仕様理解:
  - 仕様と目的の把握
  - マネージャーとの議論
  - 仕様理解のカバレッジが誰よりも広い状態になる
- リーダーシップ:
  - ぶれずに方針を維持
  - ハイコンテキストな判断の最終意思決定
  - マネージャーのパフォーマンス最大化
- リソース管理:
  - 空きメンバーのマネージャーへのアサイン
- プロジェクト状態管理:
  - サマリー役と現状を議論
  - マネージャーと仕様を議論
  - 進捗状況をマネージャーとサマリー役から把握
  - プロジェクト達成に向けた斬課題をタスクレベルで常に最新化

### 最初に実施すること

- マネージャーへの部下のアサインと、マネージャーへの役割通知
```


タスクによって使い分ける時もあるが、ベースはこれ。別ファイル化。そのうえで、渡すタスクに応じて上書き指示。


# 現象

- 空きメンバーが必ずでる。
  - 同じ作業を同じブランチで行うとコンフリクトするので、タスク分割をさせる
    - タスクが分割できないときに空きが出る
- 総司令官マネージャーがプレイしはじめる
  - 役割定義を明確にすれば改善する
  - 時々自分でやり始めるので、追加指示を出す
    - `チームのパフォーマンス最大化があなたの仕事`


# ではない

同じ成果を競わせる方法ではない。



# アウトプット評価

Cursor単体に比べ、

- 指示の粒度が１回り大きくてもいける
- 自律時間が1時間くらい平気でいける
  - タスク粒度が程よいと、30分くらいで終わるので、1時間かかることは少ない
- ドキュメントとCLAUDE.mdを合わせることで、迷わない
  - Cursor RulesをCLAUDE.mdへ移植しても機能する

## コスト

コストは、 $20 から $200 なので10倍。
一方、時間あたり成果物は10倍以上。自分で触っている時間も減らせる。

# 調査タスク

Cursor単体では出来ない規模で、仕様書をまとめられる。
分業体制を敷くことで、コンテクストを維持したまま広範囲に調べられる。
大規模なUML図も、短時間で書き起こし、自己検証できる。

## 実装コード

少なくとも、テストが完全に pass することをゴール設定するため、その範囲で品質は高い。

とはいえ、テストが通っているにも関わらず動かないケースが出るので、カバレッジをあげたり、設計を見直すことは別タスク化する必要あり。

Cursor単体で自走させたときに起こりがちの、無駄なコード生成（コンテクスト把握不足）には、ほとんど遭遇しない。

# 設計思想との相性

基本的にコアの抽象度の高いものは、崩れやすい。
具体の注入が起こる。

クリーンアーキテクチャーぽく実装させたいときに、レイヤーが崩れる現象はCursor時代から見られる。

## 目的階層

目的レベルで階層化すると、相性がよい。
実現に向けて、目的を複数階層化し、階層が深い箇所に具体的目標を置くとよい。

上位目的は、プロダクトのゴール。
続いて実装の大まかなフローの実現。
３番目くらいに単一原則や責務分解などを置いていく。
4段階くらいで、現在のタスクの上位目標くらいにする。

# 完成図

完了まで およそ28分。その間、この記事を書いており放置。
10分くらいで、半分以上の作業が終わっている。残りログファイルが+15分くらいなので、後半の作業分担がイマイチだったと思われる。

![Claude Code Company構成図](/images/2025-06-15-complete.png =800x)


↓ ログ状態 (issue.ja.md は、追加作業)
![Claude Code Company構成図](/images/2025-06-15-complete-log.png =400x)

報告では完全達成と言っている。
ただ、途中のエラーが残っていて、まだ完全解消していない。

当初の目的に対しては、いい精度で実行されており、再調査開始前の材料は揃った状態となる。

