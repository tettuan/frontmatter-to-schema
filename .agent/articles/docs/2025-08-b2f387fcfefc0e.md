---
title: "MCP対応 - プロンプト呼び出しのClimpt"
emoji: "💭"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [ClaudeCode,MCP,Climpt]
published: true
---

# Deno or MCP, or Deno embeded MCP 

Deno のほうがCLIで埋め込みやすいのですが、
プロンプトを呼び出す程度ならMCPの方が便利なので、両方対応にしました。
MCPはDenoのWrapperですから、たいしたことはしていません。

MCPは、呼び出し方がClaudeに組み込まれているので、探してくれるのは良いですね。
ただ、量が増えてきたときや、実行結果をリダイレクトしたいときには、CLIが良いです。

MCPでできることが10のところ、CLIだと30くらいのイメージです。
CLIだけでも良かったけれど、なんとなくやってみた感じで終わりました。


## Climpt = CLI Prompt

プロンプトをCLIで呼び出すDenoです。

詳細は https://jsr.io/@aidevtool/climpt

# C3L も v0.4 へ、ドメイン用語の増加

コマンドを言語化する C3L (Climpt 3-word Language) も、v0.4へ。
https://github.com/tettuan/climpt/blob/main/docs/c3l_specification_v0.4.md

特に今回は、

- 4.1 Code & Data
- 4.2 Infrastructure & Operations
- 4.3 Project & Management

という形で領域を広げました。コーディングから、インフラ側とプロジェクト側へ、です。
この先、**Natural English readability** という観点で、言語の領域を広げていくと、「適切な用語を使えるのか？」という新たな課題が生じてくることでしょう。

# プロンプト管理

プロンプトを増やしたり管理するのは、`Climpt` で良いです。
自分で作ったからというのもありますが、結構使いこんでみて、依存できます。
Claudeは色々なことを想定して進んでいるように見えているのですが、slash コマンドまでが限界かなあ、、と感じています。もうちょっと扱いやすいといいんですが。それよりもやるべきことがあるのかもしれません。

MCP周りで書くことが少なく、ただの感想みたいになってしまいました。

1点だけ、`claude` だとMCPのリストへ出るのに、
`--dangerously-skip-permissions` 付きで `claude --dangerously-skip-permissions` と起動したときに、MCPリストに出てこない状況になりました。
プロジェクト単位の `.mcp.json` を読んでくれず、です。

以下が解決してくれました。 `permissions` が必要でした。

```json:.claude/settings.json
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "climpt"
  ],
  "permissions": {
    "allow": [
      "climpt__*"
    ]
  },
```
