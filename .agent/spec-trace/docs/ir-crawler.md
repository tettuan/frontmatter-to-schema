---
traceability:
  - id:
      full: req:crawler:ir-collect-9c4e3b#20250909
      level: req
      scope: crawler
      semantic: ir-collect
      hash: 9c4e3b
      version: 20250909
    summary: IR情報収集クローラー機能の要求定義
    description: 企業のIR情報を公式ウェブサイトから自動収集する倫理的クローラーシステム
    author: system
    derived_from:
      - req:stock:multitenant-7a3f1d#20250906
    trace_to: []
    status: draft
    tags: [ir-information, web-crawler, corporate-data, ethical-crawling, automated-collection]
title: IR情報収集クローラー機能の要求定義
category: データ収集・クローリング
priority: SHOULD
created_at: 2025-09-06
evaluation:
  feasibility: 7   # クローリング技術は成熟しているが、サイト構造の多様性が課題
  importance: 8   # IR情報は投資判断の重要な要素
  urgency: 6      # 補完的機能として段階的に実装可能
  complexity: 8   # 倫理的クローリングとデータ構造化の複雑性
---

# IR情報収集クローラー機能の要求定義 `req:crawler:ir-collect-9c4e3b#20250909`

## サマリー

企業のIR（Investor
Relations）情報を公式ウェブサイトから自動収集するクローラーシステムを構築する。本クローラーは明確な識別名を持ち、ウェブサイト運営者に配慮した倫理的なクローリングを実施する。決算情報、プレスリリース、有価証券報告書等の重要な投資家向け情報を定期的に収集し、構造化データとして保存・管理する。

## 背景と目的

### 背景

- 投資判断には最新のIR情報が不可欠である
- 企業ごとにIR情報の公開形式やサイト構造が異なる
- 手動での情報収集は時間がかかり、見落としのリスクがある
- 過度なアクセスによるサーバー負荷は避けなければならない

### 目的

- IR情報の自動収集による効率化
- 最新情報の迅速な取得と通知
- 倫理的で持続可能なデータ収集
- 構造化されたIRデータベースの構築

## 要求詳細

### 1. クローラーシステム要求

**クローラー識別と倫理的動作**

- 明確なUser-Agentの設定（例：`MokaruBot/1.0 (+https://example.com/bot)` ）
- 連絡先情報の明示
- robots.txtの厳守
- クロール間隔の適切な設定（最小1秒以上）
- サイトごとの同時接続数制限（最大2接続）

**クローリング制御**

- Politeness Policy（礼儀正しいクローリング）の実装
- レート制限の動的調整
- サーバーエラー時の自動バックオフ
- クロール深度の制限
- ドメインごとのクロール設定管理

**エラーハンドリング**

- HTTPステータスコードに応じた処理
- タイムアウト処理
- リトライロジックの実装（指数バックオフ）
- 失敗ログの記録と分析

### 2. IR情報収集要求

**収集対象情報**

- 決算短信・決算説明資料
- 有価証券報告書・四半期報告書
- 適時開示情報
- プレスリリース
- 株主総会資料
- 統合報告書・アニュアルレポート
- 月次売上速報（該当企業のみ）
- コーポレートガバナンス報告書

**収集元の管理**

- 企業公式サイトのIRページ
- TDnet（適時開示情報伝達システム）
- EDINET（金融商品取引法に基づく開示書類）
- 企業が指定する公式情報源
- RSS/Atomフィードの活用

**データ形式対応**

- HTML解析とスクレイピング
- PDF文書の取得と解析
- XBRLデータの処理
- Excel/CSVファイルの処理
- 画像ファイル（図表）の保存

### 3. データ処理要求

**情報抽出と構造化**

- タイトル、日付、カテゴリーの自動抽出
- 本文テキストの抽出とクリーニング
- 数値データの識別と抽出
- メタデータの付与（企業コード、決算期等）
- 重複排除処理

**データ正規化**

- 日付形式の統一
- 数値データの単位統一
- カテゴリーの標準化
- 文字コードの統一（UTF-8）
- 改行コード・空白の正規化

**自然言語処理**

- キーワード抽出
- 要約生成
- センチメント分析（ポジティブ/ネガティブ）
- 重要度スコアリング
- 関連銘柄の抽出

### 4. スケジューリングと更新管理

**定期実行スケジュール**

- 日次クローリング（営業日の特定時間）
- 決算期に応じた頻度調整
- 緊急度の高い情報の優先処理
- 深夜・早朝の低負荷時間帯の活用
- 祝日・休日の考慮

**差分更新管理**

- 新規情報のみの取得
- 更新検知アルゴリズム
- ETagやLast-Modifiedヘッダーの活用
- コンテンツハッシュによる変更検知
- 増分クローリングの実装

**優先度管理**

- 重要度に基づくクロール順序
- 更新頻度の高いサイトの優先
- ユーザーのウォッチリスト連動
- 決算発表時期の考慮
- エラー発生サイトの優先度調整

### 5. 保存とデータ管理要求

**データストレージ**

- 原文データの完全保存
- 構造化データのデータベース格納
- バイナリファイル（PDF等）の管理
- データ圧縮とアーカイブ
- CDN活用の検討

**バージョン管理**

- IR情報の改訂履歴管理
- 差分データの保存
- タイムスタンプの記録
- 変更通知機能
- ロールバック機能

**データ保持ポリシー**

- 法定保存期間の遵守
- 古いデータのアーカイブ
- ストレージ容量の最適化
- バックアップとリストア
- データ削除ルール

### 6. アクセシビリティと検索要求

**検索機能**

- 全文検索の実装
- 詳細検索（日付、企業、カテゴリー）
- 類似文書の検索
- タグ・キーワード検索
- 検索結果のランキング

**API提供**

- RESTful APIの実装
- GraphQLの検討
- WebSocket（リアルタイム更新）
- レート制限の実装
- 認証・認可機構

**通知機能**

- 新規IR情報の通知
- ウォッチリスト連動通知
- 重要度に応じた通知
- 配信チャネル（メール、プッシュ、Webhook）
- 通知設定のカスタマイズ

## 制約事項

- 著作権法の遵守
- 各サイトの利用規約の遵守
- サーバー負荷への配慮
- 個人情報保護法への対応
- ネットワーク帯域の制限

## 成功基準

- 99%以上のIR情報を発表から1時間以内に収集
- クローリングによるサーバーダウンゼロ
- robots.txt違反ゼロ
- 月間10万件以上のIR情報収集
- 95%以上の構造化精度

## リスクと対策

### リスク

1. クローリング対象サイトからのアクセス制限
2. サイト構造変更による収集失敗
3. 大量データによるストレージ逼迫
4. 著作権侵害の指摘
5. DDoS攻撃と誤認される

### 対策

1. 事前の利用許諾取得と丁寧な運用
2. 柔軟なスクレイピングルールと監視
3. データ圧縮とクラウドストレージ活用
4. 引用範囲の明確化とリンク明示
5. User-Agent明示とクロール間隔の適正化

## 関連要求

- RQ-STOCK-TNT01-20250906: 株価データとの統合
- 将来的な要求: AI分析機能、自動レポート生成、他言語対応

---

## 履歴

```yaml
history:
  - id: RQ-IRCOL-CRW01-20250906
    summary: IR情報収集クローラー機能の初版要求定義を作成
    reason: 企業IR情報の自動収集機能の要求を明文化
    author: system
    derived_from:
      - RQ-STOCK-TNT01-20250906
    status: draft
```
