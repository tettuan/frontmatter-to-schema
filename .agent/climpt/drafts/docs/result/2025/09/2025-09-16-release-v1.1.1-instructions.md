# v1.1.1 リリース作業指示書

## 1. 概要

本指示書は、frontmatter-to-schemaプロジェクトのv1.1.1リリース作業を完遂するための手順を定義する。Circuit
Breakerパターン実装とスキーマ修正を含む改善内容のリリース準備、GitHub
Issue管理、およびタグ付けまでの全工程を網羅する。

## 2. 前提条件

### 前提情報リスト

- PR #865がmainブランチにマージ済み
- CI全ステージ（TypeCheck, JSR互換性, テスト, Lint, Format）がpass済み
- 258テストケース全てpass（1020ステップ）
- Circuit Breakerサービス実装完了
- スキーマ修正（boolean型fieldsのitemsプロパティ除去）完了

### 仮定リスト

- GitHub Issueのクローズ権限を保有
- リリースタグ作成権限を保有
- CHANGELOG.mdファイルが存在する

## 3. 作業手順

### 3.1 GitHub Issue管理フェーズ

**目的**: 解決済みIssueを適切に処理し、プロジェクト状態を整理する

**手順**:

1. Issue #848の状態確認
   - 判断基準: スキーマitemsプロパティ修正が完了していること
   - アクション:
     `gh issue close 848 --comment "Fixed in PR #865: Removed misleading items property from boolean fields"`

2. Issue #838の状態確認
   - 判断基準: Circuit Breakerパターン実装が完了していること
   - アクション:
     `gh issue close 838 --comment "Implemented in PR #865: Added circuit breaker for large dataset protection"`

3. Issue #859の進捗更新
   - 判断基準: リリース準備の進捗状況を反映
   - アクション:
     `gh issue comment 859 --body "Ready for release: All CI stages passing, circuit breaker implemented"`

### 3.2 変更履歴更新フェーズ

**目的**: リリース内容を正確に記録し、変更追跡を可能にする

**手順**:

1. CHANGELOG.mdの更新判断
   - 確認事項: v1.1.1セクションの存在有無
   - 作成内容:
     ```markdown
     ## [1.1.1] - 2025-09-16

     ### Added

     - Circuit breaker pattern for performance optimization (#838)
     - Comprehensive test coverage for circuit breaker

     ### Fixed

     - Removed misleading items property from boolean schema fields (#848)

     ### Performance

     - Configured limits: 10k complexity, 512MB memory, 60s timeout
     - Added memory usage monitoring and automatic failure recovery
     ```

2. 変更内容の検証
   - 判断基準: PR #865の変更内容と一致すること
   - 検証方法: `git diff main~1..main --stat`で変更ファイル確認

### 3.3 リリースタグ作成フェーズ

**目的**: バージョン管理を確立し、リリースポイントを明確化する

**手順**:

1. タグ作成前確認
   - 判断基準: mainブランチが最新であること
   - 確認コマンド: `git pull origin main && git status`

2. アノテーション付きタグ作成
   - 判断基準: セマンティックバージョニングに準拠
   - 実行:
     `git tag -a v1.1.1 -m "Release v1.1.1: Circuit breaker pattern and schema fixes"`

3. タグのプッシュ
   - 判断基準: ローカルタグが正常に作成されていること
   - 実行: `git push origin v1.1.1`

### 3.4 GitHubリリース作成フェーズ

**目的**: リリース内容を公開し、利用者への通知を行う

**手順**:

1. リリースノート作成
   - 判断基準: CHANGELOG.mdの内容と整合性があること
   - 実行:
     `gh release create v1.1.1 --title "v1.1.1: Performance Optimization & Schema Fixes" --notes-file RELEASE_NOTES.md`

2. リリース検証
   - 判断基準: GitHubのReleasesページに正しく表示されること
   - 確認方法: `gh release view v1.1.1`

## 4. 成果物定義

### 主成果物

- v1.1.1タグ付きリリース
- 更新済みCHANGELOG.md
- クローズ済みGitHub Issues（#848, #838）

### 検証項目

- [ ] Issue #848がクローズされている
- [ ] Issue #838がクローズされている
- [ ] CHANGELOG.mdにv1.1.1セクションが存在する
- [ ] v1.1.1タグが作成されている
- [ ] GitHubリリースが公開されている

## 5. 品質基準

### 完了条件（DoD）

1. 全ての解決済みIssueがクローズされている
2. CHANGELOG.mdが最新の変更を反映している
3. v1.1.1タグがmainブランチの最新コミットを指している
4. GitHubリリースページで変更内容が閲覧可能である
5. `deno task ci`が引き続きpassすること

### 検証方法

- リリース後のsmoke test: `deno test --allow-all`
- タグ確認: `git describe --tags --abbrev=0`
- Issue状態確認: `gh issue list --state closed --milestone v1.1.1`

## 6. 参照資料

- **プロジェクトドキュメント**: `README.md`, `CONTRIBUTING.md`
- **全域性原則**: `docs/development/totality.md`
- **AI複雑化防止**: `docs/development/ai-complexity-control.md`
- **GitHub CLI公式ドキュメント**: https://cli.github.com/manual/
- **セマンティックバージョニング仕様**: https://semver.org/

## 7. リスク管理

### 想定リスクと対策

1. **リスク**: タグ作成後の重大なバグ発見
   - **対策**:
     タグを削除し、修正後に再作成（`git tag -d v1.1.1 && git push origin :refs/tags/v1.1.1`）

2. **リスク**: CHANGELOG.md更新漏れ
   - **対策**: PR #865のコミットログから再構築

3. **リスク**: Issue早期クローズによる追加報告
   - **対策**: 必要に応じてv1.1.2として対応計画

## 8. 変更履歴

- v1.0: 初版作成（2025-09-16）
